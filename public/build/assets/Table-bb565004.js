import{J as C,q as v,c as a,b as e,F as B,r as N,o as n,t as s,f as h,h as r,u as c,e as m,w as d,a as S,m as $,v as f}from"./app-ed70cbb8.js";import{S as u}from"./sweetalert2.all-3c5ab335.js";import{_ as p}from"./IconButton-e92ee4c3.js";const E={style:{"overflow-x":"auto"}},F={class:"table table-bordered table-sm text-uppercase"},T=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Sr."),e("th",{style:{"min-width":"250px"}},"Policy No"),e("th",{style:{"min-width":"200px"}},"Client Name"),e("th",{style:{"min-width":"200px"}},"Agency Name"),e("th",{style:{"min-width":"120px"}},"COB Name"),e("th",{style:{"min-width":"120px"}},"Expiry Date"),e("th",{style:{"min-width":"80px"}},"Claims"),e("th",{style:{"min-width":"80px"}},"Type"),e("th",{style:{"min-width":"150px"}},"Action")])],-1),A=["href"],D=e("i",{class:"bx bx-link-external"},null,-1),V=e("br",null,null,-1),Y=["onClick"],q={class:"badge bg-secondary"},O=["href"],P={class:"badge bg-dark"},R=e("i",{class:"bx bx-link-external"},null,-1),j={class:"badge bg-success mr-1"},J={class:"badge bg-warning mr-1"},L=e("i",{class:"bx bx-edit bx-text-md"},null,-1),U=e("i",{class:"bx bxs-show bx-text-md"},null,-1),z=e("i",{class:"bx bxs-trash bx-text-md text-danger"},null,-1),G={key:1},H=e("td",{colspan:"10",class:"text-center"},"No Record Found",-1),I=[H],W={__name:"Table",props:{policies:Array,filter:Object,detail:Boolean},setup(o){const _=C().props.can,x=v(null),y=l=>{x.value.edit(l)},g=l=>{const i=f({id:l});u.fire({title:"Are you sure?",text:"You will not be able to recover this policy!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async t=>{t.isConfirmed&&i.delete(route("policy.delete"),{preserveScroll:!0,onSuccess:()=>{u.fire("Deleted!","Your policy has been deleted.","success")},onError:()=>{},onFinish:()=>i.reset()})})},k=l=>{f({base_doc_no:l}).post(route("policy.detail-2"),{preserveScroll:!0,onSuccess:()=>{u.fire("Updated!","The claim update successfully.","success"),close()},onError:t=>{t.status==!1&&u.fire("Error!",t.message,"error")},onFinish:()=>{}})};return(l,i)=>(n(),a("div",E,[e("table",F,[T,e("tbody",null,[o.policies.data.length>0?(n(!0),a(B,{key:0},N(o.policies.data,(t,w)=>(n(),a("tr",null,[e("td",null,s((o.policies.current_page-1)*o.policies.per_page+w+1),1),e("td",null,[e("a",{href:l.route("policy.detail",t.p_id),target:"_blank"},[h(s(t.policy_no)+" ",1),D],8,A),h(),V,t.policy_type=="endorsement"?(n(),a("button",{key:0,onClick:b=>k(t.base_doc_no)},[e("small",null,s(t.base_doc_no),1)],8,Y)):r("",!0)]),e("td",null,s(t.client_name),1),e("td",null,s(t.agency_name),1),e("td",null,[e("span",q,s(t.cob_name),1)]),e("td",null,s(t.expiry_date),1),e("td",null,[e("a",{href:`${l.route("claim.index")}?policy_id=${t.p_id}`,target:"_blank"},[e("span",P,[h(s(t.claim_count)+" ",1),R])],8,O)]),e("td",null,[e("span",j,s(t.policy_type),1),e("span",J,s(t.policy_lead_type),1)]),e("td",null,[c(_).policy_update?(n(),m(p,{key:0,class:"m-1",onClick:b=>y(t.p_id)},{default:d(()=>[L]),_:2},1032,["onClick"])):r("",!0),c(_).policy_detail&&o.detail?(n(),m(c($),{key:1,href:l.route("policy.detail",t.p_id),class:"m-1"},{default:d(()=>[S(p,null,{default:d(()=>[U]),_:1})]),_:2},1032,["href"])):r("",!0),c(_).policy_delete?(n(),m(p,{key:2,class:"m-1",onClick:b=>g(t.p_id)},{default:d(()=>[z]),_:2},1032,["onClick"])):r("",!0)])]))),256)):(n(),a("tr",G,I))])])]))}};export{W as default};
