import{J as B,q as N,c as a,a as x,s as S,b as e,F as y,r as $,o,t as l,f as m,h as r,u as c,e as h,w as d,m as E,v as g}from"./app-e55e1b89.js";import{S as u}from"./sweetalert2.all-a2895137.js";import{_ as p}from"./IconButton-d0ff82bd.js";import F from"./CreateEdit-a1283a11.js";import"./InputError-69945523.js";import"./vue-datepicker-1ad80d1c.js";/* empty css             */import"./PrimaryButton-1e49675b.js";const T={style:{"overflow-x":"auto"}},A={class:"table table-bordered table-sm text-uppercase"},D=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Sr."),e("th",{style:{"min-width":"250px"}},"Policy No"),e("th",{style:{"min-width":"200px"}},"Client Name"),e("th",{style:{"min-width":"200px"}},"Agency Name"),e("th",{style:{"min-width":"120px"}},"COB Name"),e("th",{style:{"min-width":"120px"}},"Expiry Date"),e("th",{style:{"min-width":"80px"}},"Claims"),e("th",{style:{"min-width":"80px"}},"Type"),e("th",{style:{"min-width":"150px"}},"Action")])],-1),P=["href"],V=e("i",{class:"bx bx-link-external"},null,-1),Y=e("br",null,null,-1),q=["onClick"],O={class:"badge bg-secondary"},R=["href"],j={class:"badge bg-dark"},J=e("i",{class:"bx bx-link-external"},null,-1),L={class:"badge bg-success mr-1"},U={class:"badge bg-warning mr-1"},z=e("i",{class:"bx bx-edit bx-text-md"},null,-1),G=e("i",{class:"bx bxs-show bx-text-md"},null,-1),H=e("i",{class:"bx bxs-trash bx-text-md text-danger"},null,-1),I={key:1},K=e("td",{colspan:"10",class:"text-center"},"No Record Found",-1),M=[K],oe={__name:"PolicyTable",props:{policies:Array,filter:Object,detail:Boolean},setup(n){const _=B().props.can,f=N(null),k=s=>{f.value.edit(s)},w=s=>{const i=g({id:s});u.fire({title:"Are you sure?",text:"You will not be able to recover this policy!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async t=>{t.isConfirmed&&i.delete(route("policy.delete"),{preserveScroll:!0,onSuccess:()=>{u.fire("Deleted!","Your policy has been deleted.","success")},onError:()=>{},onFinish:()=>i.reset()})})},C=s=>{g({base_doc_no:s}).post(route("policy.detail-2"),{preserveScroll:!0,onSuccess:()=>{u.fire("Updated!","The claim update successfully.","success"),close()},onError:t=>{t.status==!1&&u.fire("Error!",t.message,"error")},onFinish:()=>{}})};return(s,i)=>(o(),a(y,null,[x(F,S(s.$props,{ref_key:"create_edit_ref",ref:f,create:!1}),null,16),e("div",T,[e("table",A,[D,e("tbody",null,[n.policies.data.length>0?(o(!0),a(y,{key:0},$(n.policies.data,(t,v)=>(o(),a("tr",null,[e("td",null,l((n.policies.current_page-1)*n.policies.per_page+v+1),1),e("td",null,[e("a",{href:s.route("policy.detail",t.p_id),target:"_blank"},[m(l(t.policy_no)+" ",1),V],8,P),m(),Y,t.policy_type=="endorsement"?(o(),a("button",{key:0,onClick:b=>C(t.base_doc_no)},[e("small",null,l(t.base_doc_no),1)],8,q)):r("",!0)]),e("td",null,l(t.client_name),1),e("td",null,l(t.agency_name),1),e("td",null,[e("span",O,l(t.cob_name),1)]),e("td",null,l(t.expiry_date),1),e("td",null,[e("a",{href:`${s.route("claim.index")}?policy_id=${t.p_id}`,target:"_blank"},[e("span",j,[m(l(t.claim_count)+" ",1),J])],8,R)]),e("td",null,[e("span",L,l(t.policy_type),1),e("span",U,l(t.policy_lead_type),1)]),e("td",null,[c(_).policy_update?(o(),h(p,{key:0,class:"m-1",onClick:b=>k(t.p_id)},{default:d(()=>[z]),_:2},1032,["onClick"])):r("",!0),c(_).policy_detail&&n.detail?(o(),h(c(E),{key:1,href:s.route("policy.detail",t.p_id),class:"m-1"},{default:d(()=>[x(p,null,{default:d(()=>[G]),_:1})]),_:2},1032,["href"])):r("",!0),c(_).policy_delete?(o(),h(p,{key:2,class:"m-1",onClick:b=>w(t.p_id)},{default:d(()=>[H]),_:2},1032,["onClick"])):r("",!0)])]))),256)):(o(),a("tr",I,M))])])])],64))}};export{oe as default};
