import{J as C,e as v,o,c as a,b as e,F as B,d as N,t as l,h as p,g as r,u as d,i as b,w as u,a as S,p as $,v as _}from"./app-971f6f04.js";import{S as c}from"./sweetalert2.all-a47dd609.js";import{_ as f}from"./IconButton-3d6f1b2e.js";const E={style:{"overflow-x":"auto"}},F={class:"table table-bordered table-sm text-uppercase"},T=["href"],A=["onClick"],D={class:"badge bg-secondary"},V=["href"],Y={class:"badge bg-dark"},O={class:"badge bg-success mr-1"},P={class:"badge bg-warning mr-1"},R={key:1},L={__name:"Table",props:{policies:Array,filter:Object,detail:Boolean},setup(i){const m=C().props.can,h=v(null),y=n=>{h.value.edit(n)},g=n=>{const t=_({id:n});c.fire({title:"Are you sure?",text:"You will not be able to recover this policy!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async s=>{s.isConfirmed&&t.delete(route("policy.delete"),{preserveScroll:!0,onSuccess:()=>{c.fire("Deleted!","Your policy has been deleted.","success")},onError:()=>{},onFinish:()=>t.reset()})})},k=n=>{_({base_doc_no:n}).post(route("policy.detail-2"),{preserveScroll:!0,onSuccess:()=>{c.fire("Updated!","The claim update successfully.","success"),close()},onError:s=>{s.status==!1&&c.fire("Error!",s.message,"error")},onFinish:()=>{}})};return(n,t)=>(o(),a("div",E,[e("table",F,[t[8]||(t[8]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Sr."),e("th",{style:{"min-width":"250px"}},"Policy No"),e("th",{style:{"min-width":"200px"}},"Client Name"),e("th",{style:{"min-width":"200px"}},"Agency Name"),e("th",{style:{"min-width":"120px"}},"COB Name"),e("th",{style:{"min-width":"120px"}},"Expiry Date"),e("th",{style:{"min-width":"80px"}},"Claims"),e("th",{style:{"min-width":"80px"}},"Type"),e("th",{style:{"min-width":"150px"}},"Action")])],-1)),e("tbody",null,[i.policies.data.length>0?(o(!0),a(B,{key:0},N(i.policies.data,(s,w)=>(o(),a("tr",null,[e("td",null,l((i.policies.current_page-1)*i.policies.per_page+w+1),1),e("td",null,[e("a",{href:n.route("policy.detail",s.p_id),target:"_blank"},[p(l(s.policy_no)+" ",1),t[0]||(t[0]=e("i",{class:"bx bx-link-external"},null,-1))],8,T),t[1]||(t[1]=p()),t[2]||(t[2]=e("br",null,null,-1)),s.policy_type=="endorsement"?(o(),a("button",{key:0,onClick:x=>k(s.base_doc_no)},[e("small",null,l(s.base_doc_no),1)],8,A)):r("",!0)]),e("td",null,l(s.client_name),1),e("td",null,l(s.agency_name),1),e("td",null,[e("span",D,l(s.cob_name),1)]),e("td",null,l(s.expiry_date),1),e("td",null,[e("a",{href:`${n.route("claim.index")}?policy_id=${s.p_id}`,target:"_blank"},[e("span",Y,[p(l(s.claim_count)+" ",1),t[3]||(t[3]=e("i",{class:"bx bx-link-external"},null,-1))])],8,V)]),e("td",null,[e("span",O,l(s.policy_type),1),e("span",P,l(s.policy_lead_type),1)]),e("td",null,[d(m).policy_update?(o(),b(f,{key:0,class:"m-1",onClick:x=>y(s.p_id)},{default:u(()=>t[4]||(t[4]=[e("i",{class:"bx bx-edit bx-text-md"},null,-1)])),_:2},1032,["onClick"])):r("",!0),d(m).policy_detail&&i.detail?(o(),b(d($),{key:1,href:n.route("policy.detail",s.p_id),class:"m-1"},{default:u(()=>[S(f,null,{default:u(()=>t[5]||(t[5]=[e("i",{class:"bx bxs-show bx-text-md"},null,-1)])),_:1})]),_:2},1032,["href"])):r("",!0),d(m).policy_delete?(o(),b(f,{key:2,class:"m-1",onClick:x=>g(s.p_id)},{default:u(()=>t[6]||(t[6]=[e("i",{class:"bx bxs-trash bx-text-md text-danger"},null,-1)])),_:2},1032,["onClick"])):r("",!0)])]))),256)):(o(),a("tr",R,t[7]||(t[7]=[e("td",{colspan:"10",class:"text-center"},"No Record Found",-1)])))])])]))}};export{L as default};
