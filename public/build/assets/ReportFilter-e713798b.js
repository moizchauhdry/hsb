import{q as r,J,v as M,A as U,c as $,a as n,w as u,F as j,o as w,f as _,b as o,j as G,y as O,u as t,h as R,n as X,g as z}from"./app-539b0ff2.js";import{_ as L,a as W}from"./SecondaryButton-b7b2c45c.js";import{_ as H}from"./SuccessButton-b3702d6d.js";import{_ as c}from"./InputLabel-eb7520db.js";import{X as K}from"./vue-datepicker-afe58893.js";/* empty css             */import{s as d}from"./multiselect-cd481f66.js";import{_ as Q}from"./DarkButton-97ae4c45.js";/* empty css                                                         */const Y=o("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Z={class:"p-6"},ee=o("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),te=o("p",{class:"mt-1 text-sm text-gray-600"},[o("hr")],-1),se={class:"mt-6"},oe={class:"row g-2"},ae={class:"col-md-6"},le=o("option",{value:""},"All",-1),ne=o("option",{value:"date_of_issuance"},"Issuance Date",-1),ie=o("option",{value:"policy_period_start"},"Inception Date",-1),re=o("option",{value:"policy_period_end"},"Expiry Date",-1),ce=o("option",{value:"created_at"},"Created At",-1),de=[le,ne,ie,re,ce],ue={key:0,class:"col-md-6"},pe=o("hr",{style:{"margin-top":"30px"}},null,-1),me={class:"col-md-6"},_e={class:"col-md-6"},fe={class:"col-md-12"},ve={class:"col-md-12"},ye=o("hr",{style:{"margin-top":"30px"}},null,-1),ge={class:"col-md-12"},he={class:"col-md-12"},be={class:"col-md-12"},xe={class:"mt-6 flex justify-end"},Ae={__name:"ReportFilter",props:{data:Array,filter_route:{type:String,required:!0}},setup(D){const f=D,p=r(!1),v=r(!1),F=J().props.slug,y=r([]),k=()=>{axios.get("/axios/fetch/policy-types").then(({data:a})=>{y.value=a.policy_types})},g=r([]),A=()=>{axios.get("/axios/fetch/clients/v2").then(({data:a})=>{g.value=a.clients})},h=r([]),I=()=>{axios.get("/axios/fetch/agencies").then(({data:a})=>{h.value=a.agencies})},b=r([]),N=()=>{axios.get("/axios/fetch/insurers").then(({data:a})=>{b.value=a.insurers})},x=r([]),B=()=>{axios.get("/axios/fetch/departments").then(({data:a})=>{x.value=a.departments})},V=r([]),P=a=>{axios.post("/axios/fetch/groups",{department_ids:a}).then(({data:s})=>{V.value=s.groups})},S=r([]),T=a=>{axios.post("/axios/fetch/cobs/v2",{group_ids:a}).then(({data:s})=>{S.value=s.cobs})};var i="";const e=M({date_type:"",date_value:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),q=()=>{p.value=!0,v.value=!1,k(),A(),I(),N(),B(),i=localStorage.getItem("filters"),i&&(i=JSON.parse(i),e.date_type=i.date_type,e.date_value=i.date_value,e.policy_type=i.policy_type,e.client=i.client,e.agency=i.agency,e.cob=i.cob,e.insurer=i.insurer)},E=()=>{var a={date_type:e.date_type,date_value:e.date_value,policy_type:e.policy_type,client:e.client,agency:e.agency,cob:e.cob,insurer:e.insurer};const s=new URLSearchParams(a).toString();var l;f.filter_route==="report"&&(l=`${route("report.index",F)}?${s}`),f.filter_route==="policy"&&(l=`${route("policy.index")}?${s}`),e.post(l,{preserveScroll:!0,onSuccess:C=>{m(),localStorage.setItem("filters",JSON.stringify(a))},onError:C=>{console.log(C)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()};return U(()=>e.department,a=>{a&&a.length>0&&P(e.department)}),U(()=>e.group,a=>{a&&a.length>0&&T(e.group)}),(a,s)=>(w(),$(j,null,[n(Q,{onClick:q,type:"button",class:"mx-1"},{default:u(()=>[Y,_(" Filters ")]),_:1}),n(L,{show:p.value,onClose:m},{default:u(()=>[o("form",{onSubmit:s[9]||(s[9]=z(l=>v.value?a.update():E(),["prevent"]))},[o("div",Z,[ee,te,o("div",se,[o("div",oe,[o("div",ae,[n(c,{for:"",value:"Date Type",class:"mb-1"}),G(o("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).date_type=l),class:"form-control"},de,512),[[O,t(e).date_type]])]),t(e).date_type?(w(),$("div",ue,[n(c,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(t(K),{modelValue:t(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):R("",!0),pe,o("div",me,[n(c,{for:"",value:"Policy Type",class:"mb-1"}),n(t(d),{modelValue:t(e).policy_type,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).policy_type=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",_e,[n(c,{for:"",value:"Insurer",class:"mb-1"}),n(t(d),{modelValue:t(e).insurer,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).insurer=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",fe,[n(c,{for:"",value:"Agency",class:"mb-1"}),n(t(d),{modelValue:t(e).agency,"onUpdate:modelValue":s[4]||(s[4]=l=>t(e).agency=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ve,[n(c,{for:"",value:"Client",class:"mb-1"}),n(t(d),{modelValue:t(e).client,"onUpdate:modelValue":s[5]||(s[5]=l=>t(e).client=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),ye,o("div",ge,[n(c,{for:"",value:"Department",class:"mb-1"}),n(t(d),{modelValue:t(e).department,"onUpdate:modelValue":s[6]||(s[6]=l=>t(e).department=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",he,[n(c,{for:"",value:"Group",class:"mb-1"}),n(t(d),{modelValue:t(e).group,"onUpdate:modelValue":s[7]||(s[7]=l=>t(e).group=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",be,[n(c,{for:"",value:"Class of Business",class:"mb-1"}),n(t(d),{modelValue:t(e).cob,"onUpdate:modelValue":s[8]||(s[8]=l=>t(e).cob=l),options:S.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),o("div",xe,[n(W,{onClick:m},{default:u(()=>[_(" Cancel ")]),_:1}),n(H,{class:X(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[_(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ae as default};
