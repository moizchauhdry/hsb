import{e as c,v as w,o as r,i as C,w as m,b as t,t as l,u as i,c as u,g as D,l as N,z as k,a as p,d as S,F as $,h,n as B,j as M}from"./app-2503355b.js";/* empty css                                               */import{_ as V}from"./InputError-dd830035.js";import{_ as F}from"./Modal-214ce95c.js";import{_ as Y}from"./SecondaryButton-87a4c4ba.js";import{_ as j}from"./SuccessButton-55f9f62b.js";import{h as E}from"./moment-a9aaa855.js";const L={class:"p-6"},z={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},A={class:"text-sm text-gray-500"},T={key:0,class:"mr-2"},U={class:"mt-6"},O={class:"row g-3"},P={class:"col-md-12"},q={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},G={class:"card-body"},H={class:"table-responsive"},I={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},J={class:"mt-6 flex justify-end"},ot={__name:"Note",setup(K,{expose:y}){const d=c(!1),n=c(!1),_=c([]),s=w({policy_id:"",policy_claim_id:"",note:""}),x=()=>{s.post(route("claim.store.claim-note"),{preserveScroll:!0,onSuccess:o=>{var e=o.props.flash.data;v(e.policy_claim_id,e.policy_id),s.note=""},onError:()=>{},onFinish:()=>{}})},f=()=>{d.value=!1},b=(o,e)=>{d.value=!0,n.value=!1,s.policy_id=e,s.policy_claim_id=o,s.note="",v(o,e)},v=(o,e)=>{axios.get(`/claims/fetch/claim-notes/${o}/${e}`).then(({data:a})=>{_.value=a.claim_notes})},g=o=>E(o).format("DD-MM-YYYY");return y({claimNote:(o,e)=>b(o,e)}),(o,e)=>(r(),C(F,{show:d.value,onClose:f},{default:m(()=>[t("form",{onSubmit:e[1]||(e[1]=M(a=>n.value?o.update():x(),["prevent"]))},[t("div",L,[t("h2",z,[t("span",null,l(n.value?"Edit":"Add")+" Note",1),t("span",A,[i(s).policy_claim_id?(r(),u("span",T,"CLM #"+l(i(s).policy_claim_id),1)):D("",!0),t("span",null,"POL #"+l(i(s).policy_id),1)])]),e[5]||(e[5]=t("p",{class:"mt-1 text-sm text-gray-600"},[t("hr")],-1)),t("div",U,[t("div",O,[t("div",P,[e[2]||(e[2]=t("label",{for:"input13",class:"form-label"},"Description",-1)),N(t("textarea",{class:"form-control",id:"detail","onUpdate:modelValue":e[0]||(e[0]=a=>i(s).note=a),rows:"5"},null,512),[[k,i(s).note]]),p(V,{message:i(s).errors.note},null,8,["message"])])]),t("div",q,[t("div",G,[t("div",H,[t("table",I,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Note #"),t("th",null,"Claim No"),t("th",null,"Description"),t("th",null,"Created At"),t("th",null,"Created By")])],-1)),t("tbody",null,[(r(!0),u($,null,S(_.value,(a,Q)=>(r(),u("tr",{key:a.id},[t("td",null,l(a.id),1),t("td",null,l(a.claim_no),1),t("td",null,l(a.note),1),t("td",null,l(g(a.created_at)),1),t("td",null,l(a.user_name),1)]))),128))])])])])])]),t("div",J,[p(Y,{onClick:f},{default:m(()=>e[4]||(e[4]=[h("Close")])),_:1}),p(j,{class:B(["ml-3",{"opacity-25":i(s).processing}]),disabled:i(s).processing},{default:m(()=>[h(l(n.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{ot as default};
