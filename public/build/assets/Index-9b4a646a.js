import{_ as h}from"./AuthenticatedLayout-63ab9449.js";import{Q as p,o as a,c as i,a as c,u as m,w as b,F as n,Z as g,b as s,y as v,z as f,d as u,t as o,f as _,h as x}from"./app-7f4e59a8.js";import{P as y}from"./Paginate-ec4c10e8.js";import L from"./Import-82e01df6.js";import"./index-b78d7340.js";/* empty css                                               */import"./_plugin-vue_export-helper-c27b6911.js";import"./InputError-f2bd706f.js";import"./SecondaryButton-723b2ff4.js";import"./SuccessButton-f0eb3a8e.js";const P={class:"page-wrapper"},k={class:"page-content"},D={class:"page-breadcrumb d-sm-flex align-items-center mb-3"},w={class:"ms-auto"},N={class:"card"},V={class:"card-body"},z={class:"table-responsive"},B={class:"table table-bordered table-sm text-uppercase",style:{"font-size":"12px"}},C={class:"px-2"},E={class:"px-2"},I={class:"px-2"},$={class:"px-2"},j={class:"px-2"},F={class:"px-2"},S={class:"badge bg-success"},T=["onClick"],A={class:"card-body"},O={class:"float-right"},R={key:0,class:"mt-4"},W={class:"pl-4"},M={class:"row p-4"},Q={class:"col-md-4"},Z={class:"card"},q={class:"card-body"},G={class:"card-title"},H={class:"col-md-4"},J={class:"card"},K={class:"card-body"},U={class:"card-title"},X={class:"text-danger"},Y={class:"col-md-4"},ss={class:"card"},ts={class:"card-body"},es={class:"card-title"},os={class:"text-success"},rs={class:"table-responsive p-4"},ls={class:"table table-bordered"},as={props:["error_logs","import_completed_count"],data(){return{selectedLog:null}},computed:{totalPolicies(){return this.error_logs.data.reduce((r,e)=>r+e.total_records,0)},policiesWithDiscrepancies(){return this.error_logs.data.reduce((r,e)=>r+e.failed_records,0)},validPolicies(){return this.totalPolicies-this.policiesWithDiscrepancies}},methods:{selectLog(r){this.selectedLog=r}}},vs=Object.assign(as,{__name:"Index",props:{error_logs:Array,import_completed_count:Object},setup(r){return p().props.import_completed_count,p().props.error_logs.data.length,(e,t)=>(a(),i(n,null,[c(m(g),{title:"Sales Report"}),c(h,null,{default:b(()=>[s("div",P,[s("div",k,[s("div",D,[t[0]||(t[0]=s("div",{class:"breadcrumb-title pe-3"},"Excel Import",-1)),t[1]||(t[1]=s("div",{class:"ps-3"},[s("nav",{"aria-label":"breadcrumb"},[s("ol",{class:"breadcrumb mb-0 p-0"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"javascript:;"},[s("i",{class:"bx bx-home-alt"})])]),s("li",{class:"breadcrumb-item active text-capitalize","aria-current":"page"},"List ")])])],-1)),t[2]||(t[2]=s("div",{class:"ms-auto"},null,-1)),s("div",w,[c(L,v(f(e.$props)),null,16)])]),s("div",N,[t[8]||(t[8]=s("div",{class:"card-header"},[s("h5",{class:"text-center mt-1"})],-1)),s("div",V,[s("div",z,[s("table",B,[t[4]||(t[4]=s("thead",{class:"table-light"},[s("tr",null,[s("th",{class:"px-2"},"Sr #"),s("th",{class:"px-2"},"ID"),s("th",{class:"px-2"},"No of Policies"),s("th",{class:"px-2"},"Found Discrepancies"),s("th",{class:"px-2"},"Time/Date"),s("th",{class:"px-2"},"Action")])],-1)),s("tbody",null,[(a(!0),i(n,null,u(r.error_logs.data,(l,d)=>(a(),i("tr",null,[s("td",C,o((r.error_logs.current_page-1)*r.error_logs.per_page+d+1),1),s("td",E,o(l.id),1),s("td",I,o(l.total_records),1),s("td",$,o(l.failed_records),1),s("td",j,o(l.created_at),1),s("td",F,[s("span",S,o(l.total_records-l.failed_records)+" / "+o(l.total_records)+" uploaded successfully",1),t[3]||(t[3]=_()),s("span",{class:"bx bx-info-circle cursor-pointer",onClick:is=>e.selectLog(l)},null,8,T)])]))),256))])])])]),s("div",A,[s("div",O,[c(y,{links:r.error_logs.links},null,8,["links"])])]),e.selectedLog?(a(),i("div",R,[s("h5",W,"Error Details for Batch ID: "+o(e.selectedLog.id),1),s("div",M,[s("div",Q,[s("div",Z,[s("div",q,[s("h5",G,"Total Policies: "+o(e.selectedLog.total_records),1)])])]),s("div",H,[s("div",J,[s("div",K,[s("h5",U,[t[5]||(t[5]=_("Policies with Discrepancies: ")),s("span",X,o(e.selectedLog.errors.length),1)])])])]),s("div",Y,[s("div",ss,[s("div",ts,[s("h5",es,[t[6]||(t[6]=_("Valid Policies: ")),s("span",os,o(e.selectedLog.total_records-e.selectedLog.errors.length),1)])])])])]),s("div",rs,[s("table",ls,[t[7]||(t[7]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Error Message")])],-1)),s("tbody",null,[(a(!0),i(n,null,u(e.selectedLog.errors,(l,d)=>(a(),i("tr",{key:d},[s("td",null,o(d+1),1),s("td",null,o(l.error_message),1)]))),128))])])])])):x("",!0)])])])]),_:1})],64))}});export{vs as default};
