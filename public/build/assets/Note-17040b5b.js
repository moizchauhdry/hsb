import{q as d,v as w,e as C,w as m,o as r,b as t,t as l,u as i,c as _,h as D,j as N,z as k,a as u,r as S,F as $,f as v,n as B,g as M}from"./app-633cdeed.js";/* empty css                                               */import{_ as V}from"./InputError-7e8a674a.js";import{_ as F}from"./Modal-507f5e3a.js";import{_ as Y}from"./SecondaryButton-ff01b269.js";import{_ as j}from"./SuccessButton-a849f489.js";import{h as E}from"./moment-a9aaa855.js";const L={class:"p-6"},z={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},A={class:"text-sm text-gray-500"},T={key:0,class:"mr-2"},U=t("p",{class:"mt-1 text-sm text-gray-600"},[t("hr")],-1),q={class:"mt-6"},O={class:"row g-3"},P={class:"col-md-12"},G=t("label",{for:"input13",class:"form-label"},"Description",-1),H={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},I={class:"card-body"},J={class:"table-responsive"},K={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},Q=t("thead",null,[t("tr",null,[t("th",null,"Note #"),t("th",null,"Claim No"),t("th",null,"Description"),t("th",null,"Created At"),t("th",null,"Created By")])],-1),R={class:"mt-6 flex justify-end"},it={__name:"Note",setup(W,{expose:y}){const c=d(!1),n=d(!1),p=d([]),s=w({policy_id:"",policy_claim_id:"",note:""}),b=()=>{s.post(route("claim.store.claim-note"),{preserveScroll:!0,onSuccess:o=>{var e=o.props.flash.data;h(e.policy_claim_id,e.policy_id),s.note=""},onError:()=>{},onFinish:()=>{}})},f=()=>{c.value=!1},x=(o,e)=>{c.value=!0,n.value=!1,s.policy_id=e,s.policy_claim_id=o,s.note="",h(o,e)},h=(o,e)=>{axios.get(`/claims/fetch/claim-notes/${o}/${e}`).then(({data:a})=>{p.value=a.claim_notes})},g=o=>E(o).format("DD-MM-YYYY");return y({claimNote:(o,e)=>x(o,e)}),(o,e)=>(r(),C(F,{show:c.value,onClose:f},{default:m(()=>[t("form",{onSubmit:e[1]||(e[1]=M(a=>n.value?o.update():b(),["prevent"]))},[t("div",L,[t("h2",z,[t("span",null,l(n.value?"Edit":"Add")+" Note",1),t("span",A,[i(s).policy_claim_id?(r(),_("span",T,"CLM #"+l(i(s).policy_claim_id),1)):D("",!0),t("span",null,"POL #"+l(i(s).policy_id),1)])]),U,t("div",q,[t("div",O,[t("div",P,[G,N(t("textarea",{class:"form-control",id:"detail","onUpdate:modelValue":e[0]||(e[0]=a=>i(s).note=a),rows:"5"},null,512),[[k,i(s).note]]),u(V,{message:i(s).errors.note},null,8,["message"])])]),t("div",H,[t("div",I,[t("div",J,[t("table",K,[Q,t("tbody",null,[(r(!0),_($,null,S(p.value,(a,X)=>(r(),_("tr",{key:a.id},[t("td",null,l(a.id),1),t("td",null,l(a.claim_no),1),t("td",null,l(a.note),1),t("td",null,l(g(a.created_at)),1),t("td",null,l(a.user_name),1)]))),128))])])])])])]),t("div",R,[u(Y,{onClick:f},{default:m(()=>[v("Close")]),_:1}),u(j,{class:B(["ml-3",{"opacity-25":i(s).processing}]),disabled:i(s).processing},{default:m(()=>[v(l(n.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{it as default};
