import{q as i,J as M,v as Y,A as V,c as A,a as l,w as m,F as J,o as P,f,b as r,u as s,n as q,g as E}from"./app-1fce4470.js";import{_ as O}from"./Modal-e2b35a92.js";import{_ as T}from"./SecondaryButton-40861c70.js";import{_ as X}from"./SuccessButton-73facf7e.js";import{_ as c}from"./InputLabel-fd90f055.js";import{X as j}from"./vue-datepicker-ffceb743.js";/* empty css             */import{s as d}from"./multiselect-62ed98b4.js";import{_ as z}from"./DarkButton-b2bada16.js";import{h as L}from"./moment-a9aaa855.js";/* empty css                                                         */const R=r("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),W={class:"p-6"},G=r("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),H=r("p",{class:"mt-1 text-sm text-gray-600"},[r("hr")],-1),K={class:"mt-6"},Q={class:"row g-2"},Z={class:"col-md-6"},ee={class:"col-md-12"},te={class:"col-md-12"},se={class:"col-md-12"},ae={class:"col-md-12"},oe={class:"col-md-12"},le={class:"mt-6 flex justify-end"},he={__name:"Filter",props:{},setup(re){const u=i(!1),S=i(!1),C=M().props.slug,w=i([]),D=()=>{axios.get("/axios/fetch/policy-types").then(({data:t})=>{w.value=t.policy_types})},_=i([]),$=()=>{axios.get("/axios/fetch/clients/v2").then(({data:t})=>{_.value=t.clients})},v=i([]),F=()=>{axios.get("/axios/fetch/agencies").then(({data:t})=>{v.value=t.agencies})},g=i([]),U=()=>{axios.get("/axios/fetch/insurers").then(({data:t})=>{g.value=t.insurers})},h=i([]),k=()=>{axios.get("/axios/fetch/departments").then(({data:t})=>{h.value=t.departments})},b=i([]),I=t=>{axios.post("/axios/fetch/cobs/v2",{department_ids:t}).then(({data:a})=>{b.value=a.cobs})};var n="";const e=Y({date_value:"",from_date:"",to_date:"",client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),N=()=>{u.value=!0,S.value=!1,D(),$(),F(),U(),k(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.client=n.client,e.agency=n.agency,e.insurer=n.insurer,e.cob=n.cob,e.department=n.department,e.group=n.group)},B=()=>{var t={date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const a=new URLSearchParams(t).toString();var o;o=`${route("report.index",C)}?${a}`,e.post(o,{preserveScroll:!0,onSuccess:y=>{p(),localStorage.setItem("filters",JSON.stringify(t))},onError:y=>{console.log(y)},onFinish:()=>{}})},p=()=>{u.value=!1,e.reset()},x=t=>L(t).format("YYYY-MM-DD");return V(()=>e.department,t=>{t&&t.length>0&&I(e.department)}),V(()=>e.date_value,t=>{e.date_value!=null?(e.from_date=x(e.date_value[0]),e.to_date=x(e.date_value[1])):(e.from_date="",e.to_date="")}),(t,a)=>(P(),A(J,null,[l(z,{onClick:N,type:"button",class:"mx-1"},{default:m(()=>[R,f(" Filters ")]),_:1}),l(O,{show:u.value,onClose:p},{default:m(()=>[r("form",{onSubmit:a[6]||(a[6]=E(o=>B(),["prevent"]))},[r("div",W,[G,H,r("div",K,[r("div",Q,[r("div",Z,[l(c,{for:"",value:"Date of Issuance",class:"mb-1"}),l(s(j),{modelValue:s(e).date_value,"onUpdate:modelValue":a[0]||(a[0]=o=>s(e).date_value=o),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])]),r("div",ee,[l(c,{for:"",value:"Insurer",class:"mb-1"}),l(s(d),{modelValue:s(e).insurer,"onUpdate:modelValue":a[1]||(a[1]=o=>s(e).insurer=o),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",te,[l(c,{for:"",value:"Agency",class:"mb-1"}),l(s(d),{modelValue:s(e).agency,"onUpdate:modelValue":a[2]||(a[2]=o=>s(e).agency=o),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",se,[l(c,{for:"",value:"Client",class:"mb-1"}),l(s(d),{modelValue:s(e).client,"onUpdate:modelValue":a[3]||(a[3]=o=>s(e).client=o),options:_.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",ae,[l(c,{for:"",value:"Department",class:"mb-1"}),l(s(d),{modelValue:s(e).department,"onUpdate:modelValue":a[4]||(a[4]=o=>s(e).department=o),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",oe,[l(c,{for:"",value:"Class of Business",class:"mb-1"}),l(s(d),{modelValue:s(e).cob,"onUpdate:modelValue":a[5]||(a[5]=o=>s(e).cob=o),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),r("div",le,[l(T,{onClick:p},{default:m(()=>[f(" Cancel ")]),_:1}),l(X,{class:q(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:m(()=>[f(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{he as default};
