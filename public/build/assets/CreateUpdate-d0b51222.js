import{q as m,J as D,v as F,c as i,b as e,f as $,g as E,j as p,x as y,u as l,a as _,y as k,F as x,r as S,t as g,h as I,z as V,o as r}from"./app-88062736.js";import{_ as b}from"./InputError-a2c7923c.js";const L={class:"col"},j=e("i",{class:"bx bx-plus"},null,-1),T={key:0,class:"modal fade show",id:"exampleLargeModal",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},q={class:"modal-dialog modal-lg"},z={class:"modal-content"},A=e("h5",{class:"modal-title"},"Business Class",-1),J={class:"modal-body"},O={class:"row g-3"},P={class:"col-md-6"},G=e("label",{for:"input13",class:"form-label"},"Class Name",-1),H={class:"col-md-6"},K=e("label",{for:"input13",class:"form-label"},"Percentage",-1),Q={class:"col-md-6"},R=e("label",{for:"input21",class:"form-label"},"Department",-1),W=["value"],X={class:"col-md-6"},Y=e("label",{for:"input21",class:"form-label"},"Insurer",-1),Z=["value","selected"],ee={key:1},se={class:"modal-footer"},te={type:"submit",class:"btn btn-primary btn-sm"},ne={__name:"CreateUpdate",props:{businessClass:Object},setup(ae,{expose:M}){const c=m(!1),d=m(!1),o=D().props.businessClass,u=m([]),f=m([]),N=()=>{c.value=!0,d.value=!1,V.get("/business-class/create").then(({data:n})=>{u.value=n.insurances,f.value=n.departments})},t=F({business_class_id:o==null?void 0:o.id,class_name:o==null?void 0:o.class_name,percentage:o==null?void 0:o.percentage,insurance_id:o==null?void 0:o.insurance_id,department_id:o==null?void 0:o.department_id}),U=()=>{t.post(route("businessClass.store"),{preserveScroll:!0,onSuccess:()=>v(),onError:()=>h(),onFinish:()=>{}})},h=()=>{},v=()=>{c.value=!1,t.reset()},B=n=>{const a=/^[0-9]*$/,s=n.target.value;a.test(s)?t.percentage=s:n.preventDefault()},C=n=>{c.value=!0,d.value=!0,V.get(`/business-class/edit/${n}`).then(({data:a})=>{t.business_class_id=a.business_cls.id,t.class_name=a.business_cls.class_name,t.percentage=a.business_cls.percentage,t.department_id=a.business_cls.department_id,u.value=a.insurances,t.insurance_id=a.business_cls.business_insurance.map(s=>s.insurance_id)})};M({edit:n=>C(n)});const w=()=>{t.post(route("businessClass.update"),{preserveScroll:!0,onSuccess:()=>v(),onError:()=>h(),onFinish:()=>{}})};return(n,a)=>(r(),i("div",L,[e("button",{type:"button",class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleLargeModal",onClick:N},[j,$("Add Business Class")]),c.value?(r(),i("div",T,[e("div",q,[e("div",z,[e("form",{onSubmit:a[5]||(a[5]=E(s=>d.value?w():U(),["prevent"]))},[e("div",{class:"modal-header"},[A,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:v})]),e("div",J,[e("div",O,[e("div",P,[G,p(e("input",{type:"text",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":a[0]||(a[0]=s=>l(t).class_name=s)},null,512),[[y,l(t).class_name]]),_(b,{message:l(t).errors.class_name},null,8,["message"])]),e("div",H,[K,p(e("input",{type:"number",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":a[1]||(a[1]=s=>l(t).percentage=s),onInput:B},null,544),[[y,l(t).percentage]]),_(b,{message:l(t).errors.percentage},null,8,["message"])]),e("div",Q,[R,p(e("select",{id:"input21",class:"form-select","onUpdate:modelValue":a[2]||(a[2]=s=>l(t).department_id=s)},[(r(!0),i(x,null,S(f.value,s=>(r(),i("option",{key:s.id,value:s.id},g(s.name),9,W))),128))],512),[[k,l(t).department_id]]),_(b,{message:l(t).errors.department_id},null,8,["message"])]),e("div",X,[Y,p(e("select",{id:"input21",class:"form-select",multiple:"","onUpdate:modelValue":a[3]||(a[3]=s=>l(t).insurance_id=s)},[u.value.length>0?(r(!0),i(x,{key:0},S(u.value,s=>(r(),i("option",{key:s.id,value:s.id,selected:d.value&&l(t).insurance_id.includes(s.id)},g(s.name),9,Z))),128)):(r(),i("p",ee,"No insurance options available."))],512),[[k,l(t).insurance_id]]),_(b,{message:l(t).errors.insurance_id},null,8,["message"])])])]),e("div",se,[e("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal",onClick:a[4]||(a[4]=(...s)=>n.closeModal&&n.closeModal(...s))},"Close"),e("button",te,g(d.value?"Save & Update":"Save & Submit"),1)])],32)])])])):I("",!0)]))}};export{ne as default};
