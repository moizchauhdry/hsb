import{q as u,J as U,v as k,e as B,w as n,o as r,b as e,t as i,u as a,c as m,h as E,r as $,a as p,f,F,n as D,g as L}from"./app-b5dde36d.js";/* empty css                                               */import{_ as N}from"./Modal-4552c9da.js";import{_ as T}from"./SecondaryButton-48deb32e.js";import{_ as V}from"./SuccessButton-c29cffb3.js";import{S as h}from"./sweetalert2.all-ad234ca9.js";import{_ as A}from"./DangerButton-5da60ddc.js";const j={class:"p-6"},M={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},P={class:"text-sm text-gray-500"},q={key:0,class:"mr-2"},z=e("p",{class:"mt-1 text-sm text-gray-600"},[e("hr")],-1),I={class:"mt-6"},J={class:"row g-3"},O={class:"col-md-12"},Y=e("label",{for:"input13",class:"form-label"},"Uploads",-1),G={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},H={class:"card-body"},K={class:"table-responsive"},Q={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},R=e("thead",null,[e("tr",null,[e("th",null,"Sr #"),e("th",null,"Upload #"),e("th",null,"Policy/Claim ID"),e("th",null,"File"),e("th",null,"Actions")])],-1),W=["src"],X=e("i",{class:"bx bxs-trash-alt mr-2"},null,-1),Z={class:"mt-6 flex justify-end"},re={__name:"Upload",setup(ee,{expose:b}){const d=u(!1),c=u(!1),y=u([]);U().props.asset_url;const g=s=>{const t=s.target.files[0];l.file=t},l=k({policy_id:"",policy_claim_id:"",file:""}),x=()=>{l.post(route("claim.store.claim-upload"),{preserveScroll:!0,onSuccess:s=>{var t=s.props.flash.data;_(t.policy_claim_id,t.policy_id),l.uploads=""},onError:()=>{},onFinish:()=>{}})},v=()=>{d.value=!1,l.reset()},C=(s,t)=>{d.value=!0,c.value=!1,l.policy_claim_id=s,l.policy_id=t,_(s,t)},_=(s,t)=>{axios.get(`/claims/fetch/claim-uploads/${s}/${t}`).then(({data:o})=>{console.log(o),y.value=o.claim_uploads})},w=s=>{h.fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&l.delete(route("claim.uploads.destroy",s),{preserveScroll:!0,onSuccess:()=>{h.fire("Deleted!","File deleted successfully.","success"),_(l.policy_claim_id,l.policy_id)},onError:o=>{console.error(o),h.fire("Error!","Could not delete the file.","error")},onFinish:()=>l.reset()})})};return b({claimUpload:(s,t)=>C(s,t)}),(s,t)=>(r(),B(N,{show:d.value,onClose:v},{default:n(()=>[e("form",{onSubmit:t[0]||(t[0]=L(o=>c.value?s.update():x(),["prevent"]))},[e("div",j,[e("h2",M,[e("span",null,i(c.value?"Edit":"Add")+" Upload",1),e("span",P,[a(l).policy_claim_id?(r(),m("span",q,"CLM #"+i(a(l).policy_claim_id),1)):E("",!0),e("span",null,"POL #"+i(a(l).policy_id),1)])]),z,e("div",I,[e("div",J,[e("div",O,[Y,e("input",{type:"file",class:"form-control",id:"input13",onChange:g},null,32)])]),e("div",G,[e("div",H,[e("div",K,[e("table",Q,[R,e("tbody",null,[(r(!0),m(F,null,$(y.value,(o,S)=>(r(),m("tr",{key:o.id},[e("td",null,i(++S),1),e("td",null,i(o.id),1),e("td",null,i(o.policy_id)+"/"+i(o.policy_claim_id),1),e("td",null,[e("img",{src:"/storage/"+o.file_url,alt:"",style:{height:"100px",width:"100px"}},null,8,W)]),e("td",null,[p(A,{onClick:te=>w(o.id)},{default:n(()=>[X,f(" DELETE ")]),_:2},1032,["onClick"])])]))),128))])])])])])]),e("div",Z,[p(T,{onClick:v},{default:n(()=>[f("Close")]),_:1}),p(V,{class:D(["ml-3",{"opacity-25":a(l).processing}]),disabled:a(l).processing},{default:n(()=>[f(i(c.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{re as default};
