import{q as i,J as q,v as E,A as C,c as w,a as r,w as u,F as P,o as $,f,b as s,j as T,y as X,u as o,h as z,n as J,g as L}from"./app-633cdeed.js";import{_ as O}from"./Modal-507f5e3a.js";import{_ as R}from"./SecondaryButton-ff01b269.js";import{_ as W}from"./SuccessButton-a849f489.js";import{_ as c}from"./InputLabel-63a67ff9.js";import{X as G}from"./vue-datepicker-0b749730.js";/* empty css             */import{s as d}from"./multiselect-8c8667bb.js";import{_ as H}from"./DarkButton-d91d9cc0.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q=s("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Z={class:"p-6"},ee=s("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),te=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1),oe={class:"mt-6"},se={class:"row g-2"},ae={class:"col-md-6"},le=s("option",{value:""},"All",-1),ne=s("option",{value:"date_of_issuance"},"Issuance Date",-1),re=s("option",{value:"policy_period_start"},"Inception Date",-1),ie=s("option",{value:"policy_period_end"},"Expiry Date",-1),ce=s("option",{value:"created_at"},"Created At",-1),de=[le,ne,re,ie,ce],ue={key:0,class:"col-md-6"},pe=s("hr",{style:{"margin-top":"30px"}},null,-1),me={class:"col-md-12"},_e={class:"col-md-12"},fe={class:"col-md-12"},he=s("hr",{style:{"margin-top":"30px"}},null,-1),ye={class:"col-md-12"},ge={class:"col-md-12"},ve={class:"mt-6 flex justify-end"},Ae={__name:"Filter",props:{data:Array,filters:Object,filter_route:{type:String,required:!0}},setup(S){const p=S,m=i(!1),h=i(!1),U=q().props.slug,k=i([]),F=()=>{axios.get("/axios/fetch/policy-types").then(({data:l})=>{k.value=l.policy_types})},y=i([]),A=()=>{axios.get("/axios/fetch/clients/v2").then(({data:l})=>{y.value=l.clients})},g=i([]),M=()=>{axios.get("/axios/fetch/agencies").then(({data:l})=>{g.value=l.agencies})},v=i([]),B=()=>{axios.get("/axios/fetch/insurers").then(({data:l})=>{v.value=l.insurers})},b=i([]),I=()=>{axios.get("/axios/fetch/departments").then(({data:l})=>{b.value=l.departments})};i([]);const x=i([]),N=l=>{axios.post("/axios/fetch/cobs/v2",{department_ids:l}).then(({data:a})=>{x.value=a.cobs})};var t="";const e=E({date_type:"",from_date:"",to_date:"",policy_type:[],client_ids:[],agency:[],insurer:[],department:[],group:[],cob:[]}),Y=()=>{m.value=!0,h.value=!1,F(),A(),M(),B(),I(),t=p.filters,e.date_type=t==null?void 0:t.date_type,e.from_date=t==null?void 0:t.from_date,e.to_date=t==null?void 0:t.to_date,e.policy_type=t==null?void 0:t.policy_type,e.client_ids=t==null?void 0:t.client_ids,e.agency=t==null?void 0:t.agency,e.insurer=t==null?void 0:t.insurer,e.department=t==null?void 0:t.department,e.group=t==null?void 0:t.group,e.cob=t==null?void 0:t.cob},j=()=>{var l={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client_ids:e.client_ids,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const a=new URLSearchParams(l).toString();var n;p.filter_route==="group"&&(n=`${route("client.group.index",U)}?${a}`),p.filter_route==="client"&&(n=`${route("client.index")}?${a}`),e.post(n,{preserveScroll:!0,onSuccess:D=>{_()},onError:D=>{console.log(D)},onFinish:()=>{}})},_=()=>{m.value=!1,e.reset()},V=l=>K(l).format("YYYY-MM-DD");return C(()=>e.department,l=>{l&&l.length>0&&N(e.department)}),C(()=>e.date_value,l=>{e.date_value!=null?(e.from_date=V(e.date_value[0]),e.to_date=V(e.date_value[1])):(e.from_date="",e.to_date="")}),(l,a)=>($(),w(P,null,[r(H,{onClick:Y,type:"button",class:"mx-1"},{default:u(()=>[Q,f(" Filters ")]),_:1}),r(O,{show:m.value,onClose:_},{default:u(()=>[s("form",{onSubmit:a[7]||(a[7]=L(n=>h.value?l.update():j(),["prevent"]))},[s("div",Z,[ee,te,s("div",oe,[s("div",se,[s("div",ae,[r(c,{for:"",value:"Date Type",class:"mb-1"}),T(s("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>o(e).date_type=n),class:"form-control"},de,512),[[X,o(e).date_type]])]),o(e).date_type?($(),w("div",ue,[r(c,{for:"",value:o(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(o(G),{modelValue:o(e).date_value,"onUpdate:modelValue":a[1]||(a[1]=n=>o(e).date_value=n),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):z("",!0),pe,s("div",me,[r(c,{for:"",value:"Insurer",class:"mb-1"}),r(o(d),{modelValue:o(e).insurer,"onUpdate:modelValue":a[2]||(a[2]=n=>o(e).insurer=n),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",_e,[r(c,{for:"",value:"Agency",class:"mb-1"}),r(o(d),{modelValue:o(e).agency,"onUpdate:modelValue":a[3]||(a[3]=n=>o(e).agency=n),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",fe,[r(c,{for:"",value:"Client",class:"mb-1"}),r(o(d),{modelValue:o(e).client_ids,"onUpdate:modelValue":a[4]||(a[4]=n=>o(e).client_ids=n),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),he,s("div",ye,[r(c,{for:"",value:"Department",class:"mb-1"}),r(o(d),{modelValue:o(e).department,"onUpdate:modelValue":a[5]||(a[5]=n=>o(e).department=n),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ge,[r(c,{for:"",value:"Class of Business",class:"mb-1"}),r(o(d),{modelValue:o(e).cob,"onUpdate:modelValue":a[6]||(a[6]=n=>o(e).cob=n),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),s("div",ve,[r(R,{onClick:_},{default:u(()=>[f(" Cancel ")]),_:1}),r(W,{class:J(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:u(()=>[f(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ae as default};
