import{q as i,J,v as T,A as _,c as $,a as r,w as u,F as j,o as w,f,b as a,j as G,y as O,u as o,h as X,n as z,g as L}from"./app-becb6c52.js";import{_ as R,a as W}from"./SecondaryButton-f014f337.js";import{_ as H}from"./SuccessButton-154886ff.js";import{_ as d}from"./InputLabel-facd8702.js";import{X as K}from"./vue-datepicker-a32aa7bb.js";/* empty css             */import{s as c}from"./multiselect-170b3a7c.js";import{_ as Q}from"./DarkButton-61bd427b.js";import{h as Z}from"./moment-a9aaa855.js";/* empty css                                                         */const ee=a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),te={class:"p-6"},oe=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),se=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1),ae={class:"mt-6"},le={class:"row g-2"},re={class:"col-md-6"},ne=a("option",{value:""},"All",-1),ie=a("option",{value:"date_of_issuance"},"Issuance Date",-1),de=a("option",{value:"policy_period_start"},"Inception Date",-1),ce=a("option",{value:"policy_period_end"},"Expiry Date",-1),ue=a("option",{value:"created_at"},"Created At",-1),pe=[ne,ie,de,ce,ue],me={key:0,class:"col-md-6"},_e=a("hr",{style:{"margin-top":"30px"}},null,-1),fe={class:"col-md-12"},ve={class:"col-md-12"},ge={class:"col-md-12"},he={class:"col-md-12"},ye={class:"col-md-12"},be={class:"col-md-12"},xe={class:"mt-6 flex justify-end"},Ne={__name:"PolicyFilter",props:{filter_route:{type:String,required:!0}},setup(U){const v=U,p=i(!1),g=i(!1),k=J().props.slug,F=i([]),I=()=>{axios.get("/axios/fetch/policy-types").then(({data:t})=>{F.value=t.policy_types})},h=i([]),N=()=>{axios.get("/axios/fetch/clients/v2").then(({data:t})=>{h.value=t.clients})},y=i([]),A=()=>{axios.get("/axios/fetch/agencies").then(({data:t})=>{y.value=t.agencies})},b=i([]),M=()=>{axios.get("/axios/fetch/insurers").then(({data:t})=>{b.value=t.insurers})},x=i([]),B=()=>{axios.get("/axios/fetch/departments").then(({data:t})=>{x.value=t.departments})},V=i([]),P=t=>{axios.post("/axios/fetch/groups",{department_ids:t}).then(({data:s})=>{V.value=s.groups})},D=i([]),Y=t=>{axios.post("/axios/fetch/cobs/v2",{group_ids:t}).then(({data:s})=>{D.value=s.cobs})};var n="";const e=T({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),q=()=>{p.value=!0,g.value=!1,I(),N(),A(),M(),B(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_type=n.date_type,e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.policy_type=n.policy_type,e.client=n.client,e.agency=n.agency,e.insurer=n.insurer,e.cob=n.cob,e.department=n.department,e.group=n.group)},E=()=>{var t={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const s=new URLSearchParams(t).toString();var l;v.filter_route==="report"&&(l=`${route("report.index",k)}?${s}`),v.filter_route==="policy"&&(l=`${route("policy.index")}?${s}`),e.post(l,{preserveScroll:!0,onSuccess:C=>{m(),localStorage.setItem("filters",JSON.stringify(t))},onError:C=>{console.log(C)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()},S=t=>Z(t).format("YYYY-MM-DD");return _(()=>e.department,t=>{t&&t.length>0&&P(e.department)}),_(()=>e.group,t=>{t&&t.length>0&&Y(e.group)}),_(()=>e.date_value,t=>{e.date_value!=null?(e.from_date=S(e.date_value[0]),e.to_date=S(e.date_value[1])):(e.from_date="",e.to_date="")}),(t,s)=>(w(),$(j,null,[r(Q,{onClick:q,type:"button",class:"mx-1"},{default:u(()=>[ee,f(" Filters ")]),_:1}),r(R,{show:p.value,onClose:m},{default:u(()=>[a("form",{onSubmit:s[8]||(s[8]=L(l=>g.value?t.update():E(),["prevent"]))},[a("div",te,[oe,se,a("div",ae,[a("div",le,[a("div",re,[r(d,{for:"",value:"Date Type",class:"mb-1"}),G(a("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(e).date_type=l),class:"form-control"},pe,512),[[O,o(e).date_type]])]),o(e).date_type?(w(),$("div",me,[r(d,{for:"",value:o(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(o(K),{modelValue:o(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=l=>o(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):X("",!0),_e,a("div",fe,[r(d,{for:"",value:"Insurer",class:"mb-1"}),r(o(c),{modelValue:o(e).insurer,"onUpdate:modelValue":s[2]||(s[2]=l=>o(e).insurer=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ve,[r(d,{for:"",value:"Agency",class:"mb-1"}),r(o(c),{modelValue:o(e).agency,"onUpdate:modelValue":s[3]||(s[3]=l=>o(e).agency=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ge,[r(d,{for:"",value:"Client",class:"mb-1"}),r(o(c),{modelValue:o(e).client,"onUpdate:modelValue":s[4]||(s[4]=l=>o(e).client=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",he,[r(d,{for:"",value:"Department",class:"mb-1"}),r(o(c),{modelValue:o(e).department,"onUpdate:modelValue":s[5]||(s[5]=l=>o(e).department=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ye,[r(d,{for:"",value:"Group",class:"mb-1"}),r(o(c),{modelValue:o(e).group,"onUpdate:modelValue":s[6]||(s[6]=l=>o(e).group=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",be,[r(d,{for:"",value:"Class of Business",class:"mb-1"}),r(o(c),{modelValue:o(e).cob,"onUpdate:modelValue":s[7]||(s[7]=l=>o(e).cob=l),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",xe,[r(W,{onClick:m},{default:u(()=>[f(" Cancel ")]),_:1}),r(H,{class:z(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:u(()=>[f(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ne as default};
