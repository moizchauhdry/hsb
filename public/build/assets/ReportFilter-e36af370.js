import{q as i,J as E,v as J,A as _,c as $,a as r,w as u,F as j,o as w,f,b as a,j as G,y as O,u as t,h as R,n as X,g as z}from"./app-4d0731cb.js";import{_ as L,a as W}from"./SecondaryButton-dec1a0ba.js";import{_ as H}from"./SuccessButton-67274df0.js";import{_ as d}from"./InputLabel-967ac568.js";import{X as K}from"./vue-datepicker-d9636824.js";/* empty css             */import{s as c}from"./multiselect-4fd4c722.js";import{_ as Q}from"./DarkButton-a539f5f8.js";import{h as Z}from"./moment-a9aaa855.js";/* empty css                                                         */const ee=a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),te={class:"p-6"},oe=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),se=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1),ae={class:"mt-6"},le={class:"row g-2"},re={class:"col-md-6"},ne=a("option",{value:""},"All",-1),ie=a("option",{value:"date_of_issuance"},"Issuance Date",-1),de=a("option",{value:"policy_period_start"},"Inception Date",-1),ce=a("option",{value:"policy_period_end"},"Expiry Date",-1),ue=a("option",{value:"created_at"},"Created At",-1),pe=[ne,ie,de,ce,ue],me={key:0,class:"col-md-6"},_e=a("hr",{style:{"margin-top":"30px"}},null,-1),fe={class:"col-md-6"},ve={class:"col-md-6"},ge={class:"col-md-12"},ye={class:"col-md-12"},he=a("hr",{style:{"margin-top":"30px"}},null,-1),be={class:"col-md-12"},xe={class:"col-md-12"},Ve={class:"col-md-12"},De={class:"mt-6 flex justify-end"},Me={__name:"ReportFilter",props:{filter_route:{type:String,required:!0}},setup(k){const v=k,p=i(!1),g=i(!1),F=E().props.slug,y=i([]),I=()=>{axios.get("/axios/fetch/policy-types").then(({data:s})=>{y.value=s.policy_types})},h=i([]),N=()=>{axios.get("/axios/fetch/clients/v2").then(({data:s})=>{h.value=s.clients})},b=i([]),A=()=>{axios.get("/axios/fetch/agencies").then(({data:s})=>{b.value=s.agencies})},x=i([]),M=()=>{axios.get("/axios/fetch/insurers").then(({data:s})=>{x.value=s.insurers})},V=i([]),B=()=>{axios.get("/axios/fetch/departments").then(({data:s})=>{V.value=s.departments})},D=i([]),P=s=>{axios.post("/axios/fetch/groups",{department_ids:s}).then(({data:o})=>{D.value=o.groups})},S=i([]),T=s=>{axios.post("/axios/fetch/cobs/v2",{group_ids:s}).then(({data:o})=>{S.value=o.cobs})};var n="";const e=J({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),Y=()=>{p.value=!0,g.value=!1,I(),N(),A(),M(),B(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_type=n.date_type,e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.policy_type=n.policy_type,e.client=n.client,e.agency=n.agency,e.insurer=n.insurer,e.cob=n.cob,e.department=n.department,e.group=n.group)},q=()=>{var s={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const o=new URLSearchParams(s).toString();var l;v.filter_route==="report"&&(l=`${route("report.index",F)}?${o}`),v.filter_route==="policy"&&(l=`${route("policy.index")}?${o}`),e.post(l,{preserveScroll:!0,onSuccess:U=>{m(),localStorage.setItem("filters",JSON.stringify(s))},onError:U=>{console.log(U)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()},C=s=>Z(s).format("YYYY-MM-DD");return _(()=>e.department,s=>{s&&s.length>0&&P(e.department)}),_(()=>e.group,s=>{s&&s.length>0&&T(e.group)}),_(()=>e.date_value,s=>{e.date_value!=null?(e.from_date=C(e.date_value[0]),e.to_date=C(e.date_value[1])):(e.from_date="",e.to_date="")}),(s,o)=>(w(),$(j,null,[r(Q,{onClick:Y,type:"button",class:"mx-1"},{default:u(()=>[ee,f(" Filters ")]),_:1}),r(L,{show:p.value,onClose:m},{default:u(()=>[a("form",{onSubmit:o[9]||(o[9]=z(l=>g.value?s.update():q(),["prevent"]))},[a("div",te,[oe,se,a("div",ae,[a("div",le,[a("div",re,[r(d,{for:"",value:"Date Type",class:"mb-1"}),G(a("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).date_type=l),class:"form-control"},pe,512),[[O,t(e).date_type]])]),t(e).date_type?(w(),$("div",me,[r(d,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(t(K),{modelValue:t(e).date_value,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):R("",!0),_e,a("div",fe,[r(d,{for:"",value:"Policy Type",class:"mb-1"}),r(t(c),{modelValue:t(e).policy_type,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).policy_type=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ve,[r(d,{for:"",value:"Insurer",class:"mb-1"}),r(t(c),{modelValue:t(e).insurer,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).insurer=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ge,[r(d,{for:"",value:"Agency",class:"mb-1"}),r(t(c),{modelValue:t(e).agency,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).agency=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ye,[r(d,{for:"",value:"Client",class:"mb-1"}),r(t(c),{modelValue:t(e).client,"onUpdate:modelValue":o[5]||(o[5]=l=>t(e).client=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),he,a("div",be,[r(d,{for:"",value:"Department",class:"mb-1"}),r(t(c),{modelValue:t(e).department,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).department=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",xe,[r(d,{for:"",value:"Group",class:"mb-1"}),r(t(c),{modelValue:t(e).group,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).group=l),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",Ve,[r(d,{for:"",value:"Class of Business",class:"mb-1"}),r(t(c),{modelValue:t(e).cob,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).cob=l),options:S.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",De,[r(W,{onClick:m},{default:u(()=>[f(" Cancel ")]),_:1}),r(H,{class:X(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[f(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Me as default};
