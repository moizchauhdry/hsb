import{e as i,J as Y,v as j,f as w,o as f,c as y,a as r,w as m,F as E,b as a,h as g,l as q,y as J,u as s,g as U,n as O,j as X}from"./app-0973401a.js";import{_ as z}from"./Modal-293a94c6.js";import{_ as L}from"./SecondaryButton-b3527834.js";import{_ as R}from"./SuccessButton-8db24ace.js";import{_ as u}from"./InputLabel-82863724.js";import{X as W}from"./vue-datepicker-f9debddb.js";/* empty css             */import{s as d}from"./multiselect-5cf6c6c6.js";import{_ as G}from"./DarkButton-86daa20f.js";import{h as H}from"./moment-a9aaa855.js";/* empty css                                                         */const K={class:"p-6"},Q={class:"mt-6"},Z={class:"row g-2"},ee={class:"col-md-6"},te={key:0,class:"col-md-6"},oe={key:1,class:"col-md-6"},se={class:"col-md-12"},ae={class:"col-md-12"},le={class:"col-md-12"},ne={class:"col-md-12"},re={class:"col-md-12"},ie={class:"mt-6 flex justify-end"},xe={__name:"Filter",props:{filters:Object,filter_route:{type:String,required:!0}},setup(k){const _=k,p=i(!1),$=i(!1);Y().props.slug;const v=i([]),F=()=>{axios.get("/axios/fetch/policy-types").then(({data:l})=>{v.value=l.policy_types})},b=i([]),I=()=>{axios.get("/axios/fetch/clients/v2").then(({data:l})=>{b.value=l.clients})},x=i([]),M=()=>{axios.get("/axios/fetch/agencies").then(({data:l})=>{x.value=l.agencies})},V=i([]),N=()=>{axios.get("/axios/fetch/insurers").then(({data:l})=>{V.value=l.insurers})},h=i([]),A=()=>{axios.get("/axios/fetch/departments").then(({data:l})=>{h.value=l.departments})},D=i([]),B=l=>{axios.post("/axios/fetch/cobs/v2",{department_ids:l}).then(({data:t})=>{D.value=t.cobs})};var o="";const e=j({date_type:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),P=()=>{p.value=!0,$.value=!1,F(),I(),M(),N(),A(),o=_.filters,e.date_type=o==null?void 0:o.date_type,e.from_date=o==null?void 0:o.from_date,e.to_date=o==null?void 0:o.to_date,e.policy_type=o==null?void 0:o.policy_type,e.client=o==null?void 0:o.client,e.agency=o==null?void 0:o.agency,e.insurer=o==null?void 0:o.insurer,e.department=o==null?void 0:o.department,e.group=o==null?void 0:o.group,e.cob=o==null?void 0:o.cob},T=()=>{var l={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const t=new URLSearchParams(l).toString();var n;n=`${route("endorsement.index")}?${t}`,e.post(n,{preserveScroll:!0,onSuccess:S=>{c(),localStorage.setItem("filters",JSON.stringify(l))},onError:S=>{console.log(S)},onFinish:()=>{}})},c=()=>{p.value=!1,e.reset()},C=l=>H(l).format("YYYY-MM-DD");return w(()=>e.department,l=>{l&&l.length>0&&B(e.department)}),w(()=>e.date_value,l=>{e.date_value!=null?(e.from_date=C(e.date_value[0]),e.to_date=C(e.date_value[1])):(e.from_date="",e.to_date="")}),(l,t)=>(f(),y(E,null,[r(G,{onClick:P,type:"button",class:"mx-1"},{default:m(()=>t[9]||(t[9]=[a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),g(" Filters ")])),_:1}),r(z,{show:p.value,onClose:c},{default:m(()=>[a("form",{onSubmit:t[8]||(t[8]=X(n=>T(),["prevent"]))},[a("div",K,[t[14]||(t[14]=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),t[15]||(t[15]=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1)),a("div",Q,[a("div",Z,[a("div",ee,[r(u,{for:"",value:"Date Type",class:"mb-1"}),q(a("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(e).date_type=n),class:"form-control"},t[10]||(t[10]=[a("option",{value:""},"All",-1),a("option",{value:"date_of_issuance"},"Issuance Date",-1),a("option",{value:"policy_period_start"},"Inception Date",-1),a("option",{value:"policy_period_end"},"Expiry Date",-1),a("option",{value:"created_at"},"Created At",-1)]),512),[[J,s(e).date_type]])]),s(e).date_type?(f(),y("div",te,[r(u,{for:"",value:s(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(s(W),{modelValue:s(e).date_value,"onUpdate:modelValue":t[1]||(t[1]=n=>s(e).date_value=n),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):U("",!0),t[11]||(t[11]=a("hr",{style:{"margin-top":"30px"}},null,-1)),_.filter_route=="policies"?(f(),y("div",oe,[r(u,{for:"",value:"Policy Type",class:"mb-1"}),r(s(d),{modelValue:s(e).policy_type,"onUpdate:modelValue":t[2]||(t[2]=n=>s(e).policy_type=n),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])):U("",!0),a("div",se,[r(u,{for:"",value:"Insurer",class:"mb-1"}),r(s(d),{modelValue:s(e).insurer,"onUpdate:modelValue":t[3]||(t[3]=n=>s(e).insurer=n),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ae,[r(u,{for:"",value:"Agency",class:"mb-1"}),r(s(d),{modelValue:s(e).agency,"onUpdate:modelValue":t[4]||(t[4]=n=>s(e).agency=n),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",le,[r(u,{for:"",value:"Client",class:"mb-1"}),r(s(d),{modelValue:s(e).client,"onUpdate:modelValue":t[5]||(t[5]=n=>s(e).client=n),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ne,[r(u,{for:"",value:"Department",class:"mb-1"}),r(s(d),{modelValue:s(e).department,"onUpdate:modelValue":t[6]||(t[6]=n=>s(e).department=n),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",re,[r(u,{for:"",value:"Class of Business",class:"mb-1"}),r(s(d),{modelValue:s(e).cob,"onUpdate:modelValue":t[7]||(t[7]=n=>s(e).cob=n),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",ie,[r(L,{onClick:c},{default:m(()=>t[12]||(t[12]=[g(" Cancel ")])),_:1}),r(R,{class:O(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:m(()=>t[13]||(t[13]=[g(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{xe as default};
