import{q as i,J as Y,v as q,A as C,c as w,a as n,w as u,F as E,o as $,f as _,b as s,j as J,y as j,u as t,h as O,n as X,g as z}from"./app-a4909ee3.js";import{_ as L,a as R}from"./SecondaryButton-23c828f9.js";import{_ as W}from"./SuccessButton-4c37d959.js";import{_ as d}from"./InputLabel-d9b85664.js";import{X as G}from"./vue-datepicker-b91da8c6.js";/* empty css             */import{s as c}from"./multiselect-90752740.js";import{_ as H}from"./DarkButton-5cccf948.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q=s("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Z={class:"p-6"},ee=s("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),te=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1),oe={class:"mt-6"},se={class:"row g-2"},ae={class:"col-md-6"},le=s("option",{value:""},"All",-1),ne=s("option",{value:"date_of_issuance"},"Issuance Date",-1),re=s("option",{value:"policy_period_start"},"Inception Date",-1),ie=s("option",{value:"policy_period_end"},"Expiry Date",-1),de=s("option",{value:"created_at"},"Created At",-1),ce=[le,ne,re,ie,de],ue={key:0,class:"col-md-6"},pe=s("hr",{style:{"margin-top":"30px"}},null,-1),me={class:"col-md-6"},_e={class:"col-md-12"},fe={class:"col-md-12"},ve={class:"col-md-12"},ye={class:"col-md-12"},ge={class:"col-md-12"},he={class:"mt-6 flex justify-end"},Fe={__name:"PolicyFilter",props:{filter_route:{type:String,required:!0}},setup(U){const f=U,p=i(!1),v=i(!1),k=Y().props.slug,y=i([]),F=()=>{axios.get("/axios/fetch/policy-types").then(({data:a})=>{y.value=a.policy_types})},g=i([]),I=()=>{axios.get("/axios/fetch/clients/v2").then(({data:a})=>{g.value=a.clients})},h=i([]),N=()=>{axios.get("/axios/fetch/agencies").then(({data:a})=>{h.value=a.agencies})},b=i([]),A=()=>{axios.get("/axios/fetch/insurers").then(({data:a})=>{b.value=a.insurers})},x=i([]),M=()=>{axios.get("/axios/fetch/departments").then(({data:a})=>{x.value=a.departments})},V=i([]),P=a=>{axios.post("/axios/fetch/cobs/v2",{department_ids:a}).then(({data:o})=>{V.value=o.cobs})};var r="";const e=q({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),B=()=>{p.value=!0,v.value=!1,F(),I(),N(),A(),M(),r=localStorage.getItem("filters"),r&&(r=JSON.parse(r),e.date_type=r.date_type,e.date_value=r.date_value,e.from_date=r.from_date,e.to_date=r.to_date,e.policy_type=r.policy_type,e.client=r.client,e.agency=r.agency,e.insurer=r.insurer,e.cob=r.cob,e.department=r.department,e.group=r.group)},T=()=>{var a={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const o=new URLSearchParams(a).toString();var l;f.filter_route==="report"&&(l=`${route("report.index",k)}?${o}`),f.filter_route==="policy"&&(l=`${route("policy.index")}?${o}`),e.post(l,{preserveScroll:!0,onSuccess:S=>{m(),localStorage.setItem("filters",JSON.stringify(a))},onError:S=>{console.log(S)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()},D=a=>K(a).format("YYYY-MM-DD");return C(()=>e.department,a=>{a&&a.length>0&&P(e.department)}),C(()=>e.date_value,a=>{e.date_value!=null?(e.from_date=D(e.date_value[0]),e.to_date=D(e.date_value[1])):(e.from_date="",e.to_date="")}),(a,o)=>($(),w(E,null,[n(H,{onClick:B,type:"button",class:"mx-1"},{default:u(()=>[Q,_(" Filters ")]),_:1}),n(L,{show:p.value,onClose:m},{default:u(()=>[s("form",{onSubmit:o[8]||(o[8]=z(l=>v.value?a.update():T(),["prevent"]))},[s("div",Z,[ee,te,s("div",oe,[s("div",se,[s("div",ae,[n(d,{for:"",value:"Date Type",class:"mb-1"}),J(s("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).date_type=l),class:"form-control"},ce,512),[[j,t(e).date_type]])]),t(e).date_type?($(),w("div",ue,[n(d,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(t(G),{modelValue:t(e).date_value,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):O("",!0),pe,s("div",me,[n(d,{for:"",value:"Policy Type",class:"mb-1"}),n(t(c),{modelValue:t(e).policy_type,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).policy_type=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",_e,[n(d,{for:"",value:"Insurer",class:"mb-1"}),n(t(c),{modelValue:t(e).insurer,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).insurer=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",fe,[n(d,{for:"",value:"Agency",class:"mb-1"}),n(t(c),{modelValue:t(e).agency,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).agency=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ve,[n(d,{for:"",value:"Client",class:"mb-1"}),n(t(c),{modelValue:t(e).client,"onUpdate:modelValue":o[5]||(o[5]=l=>t(e).client=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ye,[n(d,{for:"",value:"Department",class:"mb-1"}),n(t(c),{modelValue:t(e).department,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).department=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ge,[n(d,{for:"",value:"Class of Business",class:"mb-1"}),n(t(c),{modelValue:t(e).cob,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).cob=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),s("div",he,[n(R,{onClick:m},{default:u(()=>[_(" Cancel ")]),_:1}),n(W,{class:X(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[_(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Fe as default};
