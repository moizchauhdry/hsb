import{q as p,J as N,v as B,c as r,b as e,f as U,g as w,j as _,x as f,u as n,a as b,y as F,F as $,r as D,t as h,h as E,z as y,o as c}from"./app-2624773b.js";import{_ as v}from"./InputError-2f2609b1.js";const I={class:"col"},L=e("i",{class:"bx bx-plus"},null,-1),j={key:0,class:"modal fade show",id:"exampleLargeModal",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},T={class:"modal-dialog modal-lg"},q={class:"modal-content"},z=e("h5",{class:"modal-title"},"Business Class",-1),A={class:"modal-body"},J={class:"row g-3"},O={class:"col-md-6"},P=e("label",{for:"input13",class:"form-label"},"Class Name",-1),G={class:"col-md-6"},H=e("label",{for:"input13",class:"form-label"},"Percentage",-1),K={class:"col-md-12"},Q=e("label",{for:"input21",class:"form-label"},"Insurance",-1),R=["value","selected"],W={key:1},X={class:"modal-footer"},Y={type:"submit",class:"btn btn-primary btn-sm"},te={__name:"CreateUpdate",props:{businessClass:Object},setup(Z,{expose:x}){const d=p(!1),i=p(!1),o=N().props.businessClass,u=p([]),k=()=>{d.value=!0,i.value=!1,y.get("/business-class/create").then(({data:l})=>{u.value=l.insurances})},s=B({business_class_id:o==null?void 0:o.id,class_name:o==null?void 0:o.class_name,percentage:o==null?void 0:o.percentage,insurance_id:o==null?void 0:o.insurance_id}),S=()=>{s.post(route("businessClass.store"),{preserveScroll:!0,onSuccess:()=>m(),onError:()=>g(),onFinish:()=>{}})},g=()=>{},m=()=>{d.value=!1,s.reset()},C=l=>{const t=/^[0-9]*$/,a=l.target.value;t.test(a)?s.percentage=a:l.preventDefault()},M=l=>{d.value=!0,i.value=!0,y.get(`/business-class/edit/${l}`).then(({data:t})=>{s.business_class_id=t.business_cls.id,s.class_name=t.business_cls.class_name,s.percentage=t.business_cls.percentage,u.value=t.insurances,s.insurance_id=t.business_cls.business_insurance.map(a=>a.insurance_id)})};x({edit:l=>M(l)});const V=()=>{s.post(route("businessClass.update"),{preserveScroll:!0,onSuccess:()=>m(),onError:()=>g(),onFinish:()=>{}})};return(l,t)=>(c(),r("div",I,[e("button",{type:"button",class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleLargeModal",onClick:k},[L,U("Add Business Class")]),d.value?(c(),r("div",j,[e("div",T,[e("div",q,[e("form",{onSubmit:t[4]||(t[4]=w(a=>i.value?V():S(),["prevent"]))},[e("div",{class:"modal-header"},[z,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m})]),e("div",A,[e("div",J,[e("div",O,[P,_(e("input",{type:"text",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=a=>n(s).class_name=a)},null,512),[[f,n(s).class_name]]),b(v,{message:n(s).errors.class_name},null,8,["message"])]),e("div",G,[H,_(e("input",{type:"number",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":t[1]||(t[1]=a=>n(s).percentage=a),onInput:C},null,544),[[f,n(s).percentage]]),b(v,{message:n(s).errors.percentage},null,8,["message"])]),e("div",K,[Q,_(e("select",{id:"input21",class:"form-select",multiple:"","onUpdate:modelValue":t[2]||(t[2]=a=>n(s).insurance_id=a)},[u.value.length>0?(c(!0),r($,{key:0},D(u.value,a=>(c(),r("option",{key:a.id,value:a.id,selected:i.value&&n(s).insurance_id.includes(a.id)},h(a.name),9,R))),128)):(c(),r("p",W,"No insurance options available."))],512),[[F,n(s).insurance_id]]),b(v,{message:n(s).errors.insurance_id},null,8,["message"])])])]),e("div",X,[e("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=(...a)=>l.closeModal&&l.closeModal(...a))},"Close"),e("button",Y,h(i.value?"Save & Update":"Save & Submit"),1)])],32)])])])):E("",!0)]))}};export{te as default};
