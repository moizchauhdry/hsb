import{e as i,J as E,v as P,f as C,o as w,c as $,a as r,w as p,F as T,b as a,h as y,l as q,y as X,u as s,g as z,n as J,j as L}from"./app-971f6f04.js";import{_ as O}from"./Modal-898b0b70.js";import{_ as R}from"./SecondaryButton-a267b138.js";import{_ as W}from"./SuccessButton-ac18518b.js";import{_ as u}from"./InputLabel-f0216f7b.js";import{X as G}from"./vue-datepicker-1965413a.js";/* empty css             */import{s as d}from"./multiselect-ecc44505.js";import{_ as H}from"./DarkButton-93824f1a.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q={class:"p-6"},Z={class:"mt-6"},ee={class:"row g-2"},te={class:"col-md-6"},oe={key:0,class:"col-md-6"},se={class:"col-md-12"},ae={class:"col-md-12"},le={class:"col-md-12"},ne={class:"col-md-12"},re={class:"col-md-12"},ie={class:"mt-6 flex justify-end"},xe={__name:"Filter",props:{data:Array,filters:Object,filter_route:{type:String,required:!0}},setup(S){const m=S,c=i(!1),_=i(!1),U=E().props.slug,k=i([]),F=()=>{axios.get("/axios/fetch/policy-types").then(({data:l})=>{k.value=l.policy_types})},g=i([]),A=()=>{axios.get("/axios/fetch/clients/v2").then(({data:l})=>{g.value=l.clients})},v=i([]),M=()=>{axios.get("/axios/fetch/agencies").then(({data:l})=>{v.value=l.agencies})},b=i([]),B=()=>{axios.get("/axios/fetch/insurers").then(({data:l})=>{b.value=l.insurers})},x=i([]),I=()=>{axios.get("/axios/fetch/departments").then(({data:l})=>{x.value=l.departments})};i([]);const h=i([]),N=l=>{axios.post("/axios/fetch/cobs/v2",{department_ids:l}).then(({data:t})=>{h.value=t.cobs})};var o="";const e=P({date_type:"",from_date:"",to_date:"",policy_type:[],client_ids:[],agency:[],insurer:[],department:[],group:[],cob:[]}),Y=()=>{c.value=!0,_.value=!1,F(),A(),M(),B(),I(),o=m.filters,e.date_type=o==null?void 0:o.date_type,e.from_date=o==null?void 0:o.from_date,e.to_date=o==null?void 0:o.to_date,e.policy_type=o==null?void 0:o.policy_type,e.client_ids=o==null?void 0:o.client_ids,e.agency=o==null?void 0:o.agency,e.insurer=o==null?void 0:o.insurer,e.department=o==null?void 0:o.department,e.group=o==null?void 0:o.group,e.cob=o==null?void 0:o.cob},j=()=>{var l={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client_ids:e.client_ids,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const t=new URLSearchParams(l).toString();var n;m.filter_route==="group"&&(n=`${route("client.group.index",U)}?${t}`),m.filter_route==="client"&&(n=`${route("client.index")}?${t}`),e.post(n,{preserveScroll:!0,onSuccess:D=>{f()},onError:D=>{console.log(D)},onFinish:()=>{}})},f=()=>{c.value=!1,e.reset()},V=l=>K(l).format("YYYY-MM-DD");return C(()=>e.department,l=>{l&&l.length>0&&N(e.department)}),C(()=>e.date_value,l=>{e.date_value!=null?(e.from_date=V(e.date_value[0]),e.to_date=V(e.date_value[1])):(e.from_date="",e.to_date="")}),(l,t)=>(w(),$(T,null,[r(H,{onClick:Y,type:"button",class:"mx-1"},{default:p(()=>t[8]||(t[8]=[a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),y(" Filters ")])),_:1}),r(O,{show:c.value,onClose:f},{default:p(()=>[a("form",{onSubmit:t[7]||(t[7]=L(n=>_.value?l.update():j(),["prevent"]))},[a("div",Q,[t[14]||(t[14]=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),t[15]||(t[15]=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1)),a("div",Z,[a("div",ee,[a("div",te,[r(u,{for:"",value:"Date Type",class:"mb-1"}),q(a("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(e).date_type=n),class:"form-control"},t[9]||(t[9]=[a("option",{value:""},"All",-1),a("option",{value:"date_of_issuance"},"Issuance Date",-1),a("option",{value:"policy_period_start"},"Inception Date",-1),a("option",{value:"policy_period_end"},"Expiry Date",-1),a("option",{value:"created_at"},"Created At",-1)]),512),[[X,s(e).date_type]])]),s(e).date_type?(w(),$("div",oe,[r(u,{for:"",value:s(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(s(G),{modelValue:s(e).date_value,"onUpdate:modelValue":t[1]||(t[1]=n=>s(e).date_value=n),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):z("",!0),t[10]||(t[10]=a("hr",{style:{"margin-top":"30px"}},null,-1)),a("div",se,[r(u,{for:"",value:"Insurer",class:"mb-1"}),r(s(d),{modelValue:s(e).insurer,"onUpdate:modelValue":t[2]||(t[2]=n=>s(e).insurer=n),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ae,[r(u,{for:"",value:"Agency",class:"mb-1"}),r(s(d),{modelValue:s(e).agency,"onUpdate:modelValue":t[3]||(t[3]=n=>s(e).agency=n),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",le,[r(u,{for:"",value:"Client",class:"mb-1"}),r(s(d),{modelValue:s(e).client_ids,"onUpdate:modelValue":t[4]||(t[4]=n=>s(e).client_ids=n),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),t[11]||(t[11]=a("hr",{style:{"margin-top":"30px"}},null,-1)),a("div",ne,[r(u,{for:"",value:"Department",class:"mb-1"}),r(s(d),{modelValue:s(e).department,"onUpdate:modelValue":t[5]||(t[5]=n=>s(e).department=n),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",re,[r(u,{for:"",value:"Class of Business",class:"mb-1"}),r(s(d),{modelValue:s(e).cob,"onUpdate:modelValue":t[6]||(t[6]=n=>s(e).cob=n),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",ie,[r(R,{onClick:f},{default:p(()=>t[12]||(t[12]=[y(" Cancel ")])),_:1}),r(W,{class:J(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:p(()=>t[13]||(t[13]=[y(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{xe as default};
