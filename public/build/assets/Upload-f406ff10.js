import{e as u,J as U,v as k,o as d,i as B,w as c,b as e,t as i,u as n,c as m,g as E,d as $,a as p,h as _,F,n as D,j as L}from"./app-971f6f04.js";/* empty css                                               */import{_ as N}from"./Modal-898b0b70.js";import{_ as T}from"./SecondaryButton-a267b138.js";import{_ as V}from"./SuccessButton-ac18518b.js";import{S as f}from"./sweetalert2.all-a47dd609.js";import{_ as j}from"./DangerButton-b8d05690.js";const A={class:"p-6"},M={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},P={class:"text-sm text-gray-500"},z={key:0,class:"mr-2"},I={class:"mt-6"},J={class:"row g-3"},O={class:"col-md-12"},Y={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},q={class:"card-body"},G={class:"table-responsive"},H={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},K=["src"],Q={class:"mt-6 flex justify-end"},ie={__name:"Upload",setup(R,{expose:x}){const a=u(!1),r=u(!1),h=u([]);U().props.asset_url;const b=s=>{const l=s.target.files[0];t.file=l},t=k({policy_id:"",policy_claim_id:"",file:null}),g=()=>{t.post(route("claim.store.claim-upload"),{preserveScroll:!0,onSuccess:s=>{var l=s.props.flash.data;v(l.policy_claim_id,l.policy_id),a.value=!1,t.reset(),t.file=null},onError:()=>{},onFinish:()=>{}})},y=()=>{a.value=!1,t.reset()},C=(s,l)=>{a.value=!0,r.value=!1,t.policy_claim_id=s,t.policy_id=l,v(s,l)},v=(s,l)=>{axios.get(`/claims/fetch/claim-uploads/${s}/${l}`).then(({data:o})=>{console.log(o),h.value=o.claim_uploads})},w=s=>{f.fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(l=>{l.isConfirmed&&t.delete(route("claim.uploads.destroy",s),{preserveScroll:!0,onSuccess:()=>{f.fire("Deleted!","File deleted successfully.","success"),a.value=!1},onError:o=>{console.error(o),f.fire("Error!","Could not delete the file.","error")},onFinish:()=>t.reset()})})};return x({claimUpload:(s,l)=>C(s,l)}),(s,l)=>(d(),B(N,{show:a.value,onClose:y},{default:c(()=>[e("form",{onSubmit:l[0]||(l[0]=L(o=>r.value?s.update():g(),["prevent"]))},[e("div",A,[e("h2",M,[e("span",null,i(r.value?"Edit":"Add")+" Upload",1),e("span",P,[n(t).policy_claim_id?(d(),m("span",z,"CLM #"+i(n(t).policy_claim_id),1)):E("",!0),e("span",null,"POL #"+i(n(t).policy_id),1)])]),l[5]||(l[5]=e("p",{class:"mt-1 text-sm text-gray-600"},[e("hr")],-1)),e("div",I,[e("div",J,[e("div",O,[l[1]||(l[1]=e("label",{for:"input13",class:"form-label"},"Uploads",-1)),e("input",{type:"file",class:"form-control",id:"input13",onChange:b},null,32)])]),e("div",Y,[e("div",q,[e("div",G,[e("table",H,[l[3]||(l[3]=e("thead",null,[e("tr",null,[e("th",null,"Sr #"),e("th",null,"Upload #"),e("th",null,"Policy/Claim ID"),e("th",null,"File"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),m(F,null,$(h.value,(o,S)=>(d(),m("tr",{key:o.id},[e("td",null,i(++S),1),e("td",null,i(o.id),1),e("td",null,i(o.policy_id)+"/"+i(o.policy_claim_id),1),e("td",null,[e("img",{src:"/storage/"+o.file_url,alt:"",style:{height:"100px",width:"100px"}},null,8,K)]),e("td",null,[p(j,{onClick:W=>w(o.id)},{default:c(()=>l[2]||(l[2]=[e("i",{class:"bx bxs-trash-alt mr-2"},null,-1),_(" DELETE ")])),_:2},1032,["onClick"])])]))),128))])])])])])]),e("div",Q,[p(T,{onClick:y},{default:c(()=>l[4]||(l[4]=[_("Close")])),_:1}),p(V,{class:D(["ml-3",{"opacity-25":n(t).processing}]),disabled:n(t).processing},{default:c(()=>[_(i(r.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{ie as default};
