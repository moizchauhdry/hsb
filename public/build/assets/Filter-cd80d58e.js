import{e as i,J as M,v as Y,f as V,o as J,c as P,a as l,w as u,F as j,b as r,h as f,u as o,n as A,j as E}from"./app-971f6f04.js";import{_ as O}from"./Modal-898b0b70.js";import{_ as T}from"./SecondaryButton-a267b138.js";import{_ as X}from"./SuccessButton-ac18518b.js";import{_ as d}from"./InputLabel-f0216f7b.js";import{X as q}from"./vue-datepicker-1965413a.js";/* empty css             */import{s as m}from"./multiselect-ecc44505.js";import{_ as z}from"./DarkButton-93824f1a.js";import{h as L}from"./moment-a9aaa855.js";/* empty css                                                         */const R={class:"p-6"},W={class:"mt-6"},G={class:"row g-2"},H={class:"col-md-6"},K={class:"col-md-12"},Q={class:"col-md-12"},Z={class:"col-md-12"},ee={class:"col-md-12"},te={class:"col-md-12"},se={class:"mt-6 flex justify-end"},ve={__name:"Filter",props:{},setup(oe){const c=i(!1),S=i(!1),C=M().props.slug,w=i([]),D=()=>{axios.get("/axios/fetch/policy-types").then(({data:s})=>{w.value=s.policy_types})},v=i([]),$=()=>{axios.get("/axios/fetch/clients/v2").then(({data:s})=>{v.value=s.clients})},_=i([]),F=()=>{axios.get("/axios/fetch/agencies").then(({data:s})=>{_.value=s.agencies})},g=i([]),U=()=>{axios.get("/axios/fetch/insurers").then(({data:s})=>{g.value=s.insurers})},b=i([]),k=()=>{axios.get("/axios/fetch/departments").then(({data:s})=>{b.value=s.departments})},h=i([]),I=s=>{axios.post("/axios/fetch/cobs/v2",{department_ids:s}).then(({data:t})=>{h.value=t.cobs})};var n="";const e=Y({date_value:"",from_date:"",to_date:"",client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),N=()=>{c.value=!0,S.value=!1,D(),$(),F(),U(),k(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.client=n.client,e.agency=n.agency,e.insurer=n.insurer,e.cob=n.cob,e.department=n.department,e.group=n.group)},B=()=>{var s={date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const t=new URLSearchParams(s).toString();var a;a=`${route("report.index",C)}?${t}`,e.post(a,{preserveScroll:!0,onSuccess:y=>{p(),localStorage.setItem("filters",JSON.stringify(s))},onError:y=>{console.log(y)},onFinish:()=>{}})},p=()=>{c.value=!1,e.reset()},x=s=>L(s).format("YYYY-MM-DD");return V(()=>e.department,s=>{s&&s.length>0&&I(e.department)}),V(()=>e.date_value,s=>{e.date_value!=null?(e.from_date=x(e.date_value[0]),e.to_date=x(e.date_value[1])):(e.from_date="",e.to_date="")}),(s,t)=>(J(),P(j,null,[l(z,{onClick:N,type:"button",class:"mx-1"},{default:u(()=>t[7]||(t[7]=[r("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),f(" Filters ")])),_:1}),l(O,{show:c.value,onClose:p},{default:u(()=>[r("form",{onSubmit:t[6]||(t[6]=E(a=>B(),["prevent"]))},[r("div",R,[t[10]||(t[10]=r("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),t[11]||(t[11]=r("p",{class:"mt-1 text-sm text-gray-600"},[r("hr")],-1)),r("div",W,[r("div",G,[r("div",H,[l(d,{for:"",value:"Date of Issuance",class:"mb-1"}),l(o(q),{modelValue:o(e).date_value,"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).date_value=a),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])]),r("div",K,[l(d,{for:"",value:"Insurer",class:"mb-1"}),l(o(m),{modelValue:o(e).insurer,"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).insurer=a),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",Q,[l(d,{for:"",value:"Agency",class:"mb-1"}),l(o(m),{modelValue:o(e).agency,"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).agency=a),options:_.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",Z,[l(d,{for:"",value:"Client",class:"mb-1"}),l(o(m),{modelValue:o(e).client,"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).client=a),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",ee,[l(d,{for:"",value:"Department",class:"mb-1"}),l(o(m),{modelValue:o(e).department,"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).department=a),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),r("div",te,[l(d,{for:"",value:"Class of Business",class:"mb-1"}),l(o(m),{modelValue:o(e).cob,"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).cob=a),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),r("div",se,[l(T,{onClick:p},{default:u(()=>t[8]||(t[8]=[f(" Cancel ")])),_:1}),l(X,{class:A(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:u(()=>t[9]||(t[9]=[f(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{ve as default};
