import{q as _,J as U,v as k,e as B,w as r,o as d,b as e,t as a,u as n,c as u,h as E,r as $,a as m,f as p,F,n as D,g as L}from"./app-9be5a561.js";/* empty css                                               */import{_ as N}from"./Modal-9aa256ba.js";import{_ as T}from"./SecondaryButton-25bb56d9.js";import{_ as V}from"./SuccessButton-6a7dc1bf.js";import{S as f}from"./sweetalert2.all-f06971bb.js";import{_ as A}from"./DangerButton-4d2ca392.js";const j={class:"p-6"},M={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},P={class:"text-sm text-gray-500"},q={key:0,class:"mr-2"},z=e("p",{class:"mt-1 text-sm text-gray-600"},[e("hr")],-1),I={class:"mt-6"},J={class:"row g-3"},O={class:"col-md-12"},Y=e("label",{for:"input13",class:"form-label"},"Uploads",-1),G={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},H={class:"card-body"},K={class:"table-responsive"},Q={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},R=e("thead",null,[e("tr",null,[e("th",null,"Sr #"),e("th",null,"Upload #"),e("th",null,"Policy/Claim ID"),e("th",null,"File"),e("th",null,"Actions")])],-1),W=["src"],X=e("i",{class:"bx bxs-trash-alt mr-2"},null,-1),Z={class:"mt-6 flex justify-end"},re={__name:"Upload",setup(ee,{expose:b}){const i=_(!1),c=_(!1),h=_([]);U().props.asset_url;const g=s=>{const l=s.target.files[0];t.file=l},t=k({policy_id:"",policy_claim_id:"",file:null}),x=()=>{t.post(route("claim.store.claim-upload"),{preserveScroll:!0,onSuccess:s=>{var l=s.props.flash.data;v(l.policy_claim_id,l.policy_id),i.value=!1,t.reset(),t.file=null},onError:()=>{},onFinish:()=>{}})},y=()=>{i.value=!1,t.reset()},C=(s,l)=>{i.value=!0,c.value=!1,t.policy_claim_id=s,t.policy_id=l,v(s,l)},v=(s,l)=>{axios.get(`/claims/fetch/claim-uploads/${s}/${l}`).then(({data:o})=>{console.log(o),h.value=o.claim_uploads})},w=s=>{f.fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(l=>{l.isConfirmed&&t.delete(route("claim.uploads.destroy",s),{preserveScroll:!0,onSuccess:()=>{f.fire("Deleted!","File deleted successfully.","success"),i.value=!1},onError:o=>{console.error(o),f.fire("Error!","Could not delete the file.","error")},onFinish:()=>t.reset()})})};return b({claimUpload:(s,l)=>C(s,l)}),(s,l)=>(d(),B(N,{show:i.value,onClose:y},{default:r(()=>[e("form",{onSubmit:l[0]||(l[0]=L(o=>c.value?s.update():x(),["prevent"]))},[e("div",j,[e("h2",M,[e("span",null,a(c.value?"Edit":"Add")+" Upload",1),e("span",P,[n(t).policy_claim_id?(d(),u("span",q,"CLM #"+a(n(t).policy_claim_id),1)):E("",!0),e("span",null,"POL #"+a(n(t).policy_id),1)])]),z,e("div",I,[e("div",J,[e("div",O,[Y,e("input",{type:"file",class:"form-control",id:"input13",onChange:g},null,32)])]),e("div",G,[e("div",H,[e("div",K,[e("table",Q,[R,e("tbody",null,[(d(!0),u(F,null,$(h.value,(o,S)=>(d(),u("tr",{key:o.id},[e("td",null,a(++S),1),e("td",null,a(o.id),1),e("td",null,a(o.policy_id)+"/"+a(o.policy_claim_id),1),e("td",null,[e("img",{src:"/storage/"+o.file_url,alt:"",style:{height:"100px",width:"100px"}},null,8,W)]),e("td",null,[m(A,{onClick:le=>w(o.id)},{default:r(()=>[X,p(" DELETE ")]),_:2},1032,["onClick"])])]))),128))])])])])])]),e("div",Z,[m(T,{onClick:y},{default:r(()=>[p("Close")]),_:1}),m(V,{class:D(["ml-3",{"opacity-25":n(t).processing}]),disabled:n(t).processing},{default:r(()=>[p(a(c.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{re as default};
