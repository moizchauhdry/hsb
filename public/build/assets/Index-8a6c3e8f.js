import{_ as w}from"./AuthenticatedLayout-7c915b11.js";import"./index-f7552d61.js";import{Q as C,m as $,o as a,c as p,a as r,u as n,w as d,F as y,Z as B,b as e,p as f,e as m,y as N,h as u,d as P,t as i,f as S,k as A,T as j}from"./app-af507bfe.js";import D from"./CreateEdit-6974aa42.js";import V from"./Import-7e548ec2.js";import{P as E}from"./Paginate-4bc55e60.js";import{S as x}from"./sweetalert2.esm.all-c4900d15.js";import F from"./ReportFilter-610ef579.js";import{_ as O}from"./Search-d5c5fd4c.js";import{_ as b}from"./IconButton-78fc9b15.js";/* empty css                                               */import"./InputError-37dddbdd.js";import"./vue-datepicker-72481e48.js";/* empty css             */import"./PrimaryButton-9c50d3ed.js";import"./SecondaryButton-13ebe2c5.js";import"./SuccessButton-ba3e303f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./InputLabel-01a8a1c0.js";import"./multiselect-b756f7c0.js";import"./DarkButton-e4d9e03a.js";/* empty css                                                         */const T={class:"page-wrapper"},Y={class:"page-content"},z={class:"page-breadcrumb d-sm-flex align-items-center mb-3"},L={class:"ms-auto",style:{display:"flex","justify-content":"space-between","align-items":"center"}},I={class:"card"},M={class:"card-header"},Q={class:"card-body"},Z={style:{"overflow-x":"auto"}},q={class:"table table-bordered table-sm text-uppercase"},G=["href"],H={class:"badge bg-secondary"},J={class:"card-footer"},K={class:"float-left"},R={class:"float-right"},he={__name:"Index",props:{policies:Array,policy:Object,filter:Object,data:Array},setup(o){const c=C().props.can,_=$(null),h=s=>{_.value.edit(s)},g=s=>{const t=j({id:s});x.fire({title:"Are you sure?",text:"You will not be able to recover this policy!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async l=>{l.isConfirmed&&t.delete(route("policy.delete"),{preserveScroll:!0,onSuccess:()=>{x.fire("Deleted!","Your policy has been deleted.","success")},onError:()=>{},onFinish:()=>t.reset()})})};return(s,t)=>(a(),p(y,null,[r(n(B),{title:"Policies"}),r(w,null,{default:d(()=>[e("div",T,[e("div",Y,[e("div",z,[t[0]||(t[0]=e("div",{class:"breadcrumb-title pe-3"},"Manage Policies",-1)),t[1]||(t[1]=e("div",{class:"ps-3"},[e("nav",{"aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb mb-0 p-0"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},[e("i",{class:"bx bx-home-alt"})])]),e("li",{class:"breadcrumb-item active text-capitalize","aria-current":"page"},"Policy List ")])])],-1)),t[2]||(t[2]=e("div",{class:"ms-auto"},null,-1)),e("div",L,[r(D,f(s.$props,{ref_key:"create_edit_ref",ref:_}),null,16),n(c).excel_import?(a(),m(V,N(f({key:0},s.$props)),null,16)):u("",!0),r(F,f(s.$props,{filter_route:"policy"}),null,16)])]),e("div",I,[e("div",M,[r(O,{route_name:s.route("policy.index")},null,8,["route_name"])]),e("div",Q,[e("div",Z,[e("table",q,[t[7]||(t[7]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Sr."),e("th",null,"Policy No"),e("th",{style:{"min-width":"200px"}},"Client Name"),e("th",{style:{"min-width":"200px"}},"Agency Name"),e("th",{style:{"min-width":"120px"}},"COB Name"),e("th",{style:{"min-width":"120px"}},"Expiry Date"),e("th",{style:{"min-width":"150px"}},"Action")])],-1)),e("tbody",null,[(a(!0),p(y,null,P(o.policies.data,(l,v)=>(a(),p("tr",null,[e("td",null,i((o.policies.current_page-1)*o.policies.per_page+v+1),1),e("td",null,[e("a",{href:s.route("policy.detail",l.id),target:"_blank"},[S(i(l.data.policy_no)+" ",1),t[3]||(t[3]=e("i",{class:"bx bx-link-external"},null,-1))],8,G)]),e("td",null,i(l.client_name),1),e("td",null,i(l.agency_name),1),e("td",null,[e("span",H,i(l.cob_name),1)]),e("td",null,i(l.data.policy_period_end),1),e("td",null,[n(c).policy_update?(a(),m(b,{key:0,class:"m-1",onClick:k=>h(l.id)},{default:d(()=>t[4]||(t[4]=[e("i",{class:"bx bx-edit bx-text-md"},null,-1)])),_:2},1032,["onClick"])):u("",!0),n(c).policy_detail?(a(),m(n(A),{key:1,href:s.route("policy.detail",l.id),class:"m-1"},{default:d(()=>[r(b,null,{default:d(()=>t[5]||(t[5]=[e("i",{class:"bx bxs-collection bx-text-md"},null,-1)])),_:1})]),_:2},1032,["href"])):u("",!0),n(c).policy_delete?(a(),m(b,{key:2,class:"m-1",onClick:k=>g(l.id)},{default:d(()=>t[6]||(t[6]=[e("i",{class:"bx bxs-trash bx-text-md text-danger"},null,-1)])),_:2},1032,["onClick"])):u("",!0)])]))),256))])])])]),e("div",J,[e("div",K,[e("span",null,"Showing "+i(o.policies.from)+" to "+i(o.policies.to)+" of "+i(o.policies.total)+" entries",1)]),e("div",R,[r(E,{links:o.policies.links},null,8,["links"])])])])])])]),_:1})],64))}};export{he as default};
