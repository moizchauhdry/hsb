import{q as n,v as A,e as B,w as f,G as C,o as h,b as e,u as m,c as b,t as d,h as D,j as F,s as O,f as i,r as P,F as T,a as k,n as q}from"./app-e3c8175b.js";import{a as z,_ as G}from"./SecondaryButton-2f000ee1.js";import{_ as K}from"./SuccessButton-54fa828a.js";const L={class:"p-6"},M={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},Q=e("span",null,"Assign Client",-1),U={class:"text-sm text-gray-500"},H={key:0,class:"mr-2"},J=e("p",{class:"mt-1 text-sm text-gray-600"},[e("hr")],-1),R={class:"mt-6"},W={class:"card"},X={class:"card-header"},Y={class:"row"},Z={class:"col-md-6"},ee={class:"card-body"},se={class:"table-responsive"},te={class:"table table-bordered table-sm table-hover"},ae={class:"text-uppercase"},oe=["checked"],le=e("th",null,"Name",-1),ne=e("th",null,"Code",-1),ce=["value","checked","onChange"],re={class:"card-footer"},de={class:""},ie=["disabled"],ue=e("i",{class:"bx bx-arrow-to-left"},null,-1),_e=[ue],ve=["disabled"],he=e("i",{class:"bx bx-arrow-to-right"},null,-1),me=[he],pe={class:"mt-6 flex justify-end"},xe={__name:"AssignClient",props:{roles:Object,slug:Object},setup(fe,{expose:w}){const u=n(!1),S=n(!1),_=n([]),o=n(new Set),c=n(1),g=n(1),r=n({}),p=n(""),l=A({user_id:"",client_id:[]}),I=()=>{l.client_id=Array.from(o.value),l.post(route("user.assign-client"),{preserveScroll:!0,onSuccess:()=>{u.value=!1},onError:()=>{},onFinish:()=>{}})},$=t=>{u.value=!0,S.value=!0,l.user_id=t,l.client_id=[],o.value=new Set,E(t)},E=async t=>{try{const a=(await C.get(`/users/selected-client/${t}`)).data.items;console.log(a,"saved"),a.forEach(x=>o.value.add(parseInt(x))),v()}catch(s){console.error("Error fetching saved items:",s)}},y=()=>{u.value=!1,l.reset()},v=async(t=1)=>{try{const s=await C.get("/axios/fetch/clients",{params:{page:t,search:p.value}});_.value=s.data.data,c.value=s.data.current_page,g.value=s.data.last_page,r.value[t]=r.value[t]||!1}catch(s){console.error("Error fetching items:",s)}},j=()=>{const t=c.value,s=!r.value[t];r.value[t]=s,s?_.value.forEach(a=>o.value.add(a.id)):_.value.forEach(a=>o.value.delete(a.id))},N=t=>o.value.has(t),V=t=>{o.value.has(t)?o.value.delete(t):o.value.add(t)};return w({assignClient:t=>$(t)}),(t,s)=>(h(),B(z,{show:u.value,onClose:y},{default:f(()=>[e("div",L,[e("h2",M,[Q,e("span",U,[m(l).user_id?(h(),b("span",H,"ID #"+d(m(l).user_id),1)):D("",!0)])]),J,e("div",R,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[F(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),class:"form-control mr-2 mb-2",placeholder:"Search",style:{width:"100%"},onKeyup:s[1]||(s[1]=a=>v())},null,544),[[O,p.value]]),i(" "+d(o.value),1)])])]),e("div",ee,[e("div",se,[e("table",te,[e("thead",ae,[e("tr",null,[e("th",null,[e("input",{type:"checkbox",checked:r.value[c.value],onChange:j},null,40,oe),i(" ID ")]),le,ne])]),e("tbody",null,[(h(!0),b(T,null,P(_.value,a=>(h(),b("tr",{key:a.id},[e("td",null,[e("input",{type:"checkbox",value:a.id,checked:N(a.id),onChange:x=>V(a.id)},null,40,ce),i(" "+d(a.id),1)]),e("td",null,d(a.name),1),e("td",null,d(a.code),1)]))),128))])])])]),e("div",re,[e("div",de,[e("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:c.value===1,onClick:s[2]||(s[2]=a=>v(c.value-1))},_e,8,ie),e("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:c.value===g.value,onClick:s[3]||(s[3]=a=>v(c.value+1))},me,8,ve)])])])]),e("div",pe,[k(G,{onClick:y},{default:f(()=>[i(" Cancel ")]),_:1}),k(K,{class:q(["ml-3",{"opacity-25":m(l).processing}]),disabled:m(l).processing,onClick:s[4]||(s[4]=a=>I())},{default:f(()=>[i(" Save ")]),_:1},8,["class","disabled"])])])]),_:1},8,["show"]))}};export{xe as default};
