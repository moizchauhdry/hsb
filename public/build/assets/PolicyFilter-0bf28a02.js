import{e as u,J as j,v as q,f as k,o as p,c as m,a as n,w as y,F as S,b as a,h as v,l as X,y as z,u as s,g as f,n as J,j as L}from"./app-2503355b.js";import{_ as O}from"./Modal-214ce95c.js";import{_ as R}from"./SecondaryButton-87a4c4ba.js";import{_ as W}from"./SuccessButton-55f9f62b.js";import{_ as d}from"./InputLabel-5fa8293c.js";import{X as G}from"./vue-datepicker-8fd9a4f4.js";/* empty css             */import{s as c}from"./multiselect-539c19fd.js";import{_ as H}from"./DarkButton-8664eec5.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q={class:"p-6"},Z={class:"mt-6"},ee={class:"row g-2"},te={class:"col-md-6"},oe={key:1,value:"policy_period_end"},se={key:2,value:"date_of_issuance"},le={key:0,class:"col-md-6"},ae={key:1,class:"col-md-6"},re={class:"col-md-12"},ne={class:"col-md-12"},ie={class:"col-md-12"},ue={class:"col-md-12"},de={class:"col-md-12"},pe={class:"mt-6 flex justify-end"},De={__name:"PolicyFilter",props:{filters:Object,filter_route:{type:String,required:!0}},setup(U){const i=U,_=u(!1),F=u(!1),I=j().props.slug,b=u([]),M=()=>{axios.get("/axios/fetch/policy-types").then(({data:r})=>{b.value=r.policy_types})},x=u([]),P=()=>{axios.get("/axios/fetch/clients/v2").then(({data:r})=>{x.value=r.clients})},V=u([]),A=()=>{axios.get("/axios/fetch/agencies").then(({data:r})=>{V.value=r.agencies})},h=u([]),B=()=>{axios.get("/axios/fetch/insurers").then(({data:r})=>{h.value=r.insurers})},D=u([]),E=()=>{axios.get("/axios/fetch/departments").then(({data:r})=>{D.value=r.departments})},w=u([]),N=r=>{axios.post("/axios/fetch/cobs/v2",{department_ids:r}).then(({data:t})=>{w.value=t.cobs})};var o="";const e=q({date_type:"",from_date:"",to_date:"",policy_type:[],client_ids:[],agency:[],insurer:[],department:[],group:[],cob:[]}),T=()=>{_.value=!0,F.value=!1,M(),P(),A(),B(),E(),o=i.filters,e.date_type=o==null?void 0:o.date_type,e.from_date=o==null?void 0:o.from_date,e.to_date=o==null?void 0:o.to_date,e.policy_type=o==null?void 0:o.policy_type,e.client_ids=o==null?void 0:o.client_ids,e.agency=o==null?void 0:o.agency,e.insurer=o==null?void 0:o.insurer,e.department=o==null?void 0:o.department,e.group=o==null?void 0:o.group,e.cob=o==null?void 0:o.cob},Y=()=>{var r={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client_ids:e.client_ids,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const t=new URLSearchParams(r).toString();var l;i.filter_route==="report"&&(l=`${route("report.index",I)}?${t}`),(i.filter_route==="policy"||i.filter_route==="policies"||i.filter_route==="renewals")&&(l=`${route("policy.index")}?${t}`),i.filter_route==="endorsement"&&(l=`${route("endorsement.index")}?${t}`),e.post(l,{preserveScroll:!0,onSuccess:$=>{g()},onError:$=>{console.log($)},onFinish:()=>{}})},g=()=>{_.value=!1,e.reset()},C=r=>K(r).format("YYYY-MM-DD");return k(()=>e.department,r=>{r&&r.length>0&&N(e.department)}),k(()=>e.date_value,r=>{e.date_value!=null?(e.from_date=C(e.date_value[0]),e.to_date=C(e.date_value[1])):(e.from_date="",e.to_date="")}),(r,t)=>(p(),m(S,null,[n(H,{onClick:T,type:"button",class:"mx-1"},{default:y(()=>t[9]||(t[9]=[a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),v(" Filters ")])),_:1}),n(O,{show:_.value,onClose:g},{default:y(()=>[a("form",{onSubmit:t[8]||(t[8]=L(l=>Y(),["prevent"]))},[a("div",Q,[t[18]||(t[18]=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),t[19]||(t[19]=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1)),a("div",Z,[a("div",ee,[a("div",te,[n(d,{for:"",value:"Date Type",class:"mb-1"}),X(a("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).date_type=l),class:"form-control"},[i.filter_route=="policies"||i.filter_route=="endorsement"?(p(),m(S,{key:0},[t[10]||(t[10]=a("option",{value:""},"All",-1)),t[11]||(t[11]=a("option",{value:"date_of_issuance"},"Issuance Date",-1)),t[12]||(t[12]=a("option",{value:"policy_period_start"},"Inception Date",-1)),t[13]||(t[13]=a("option",{value:"policy_period_end"},"Expiry Date",-1)),t[14]||(t[14]=a("option",{value:"created_at"},"Created At",-1))],64)):f("",!0),i.filter_route=="renewals"?(p(),m("option",oe,"Expiry Date")):f("",!0),i.filter_route=="report"?(p(),m("option",se,"Date of Issuance")):f("",!0)],512),[[z,s(e).date_type]])]),s(e).date_type?(p(),m("div",le,[n(d,{for:"",value:s(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(s(G),{modelValue:s(e).date_value,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):f("",!0),t[15]||(t[15]=a("hr",{style:{"margin-top":"30px"}},null,-1)),i.filter_route=="policies"?(p(),m("div",ae,[n(d,{for:"",value:"Policy Type",class:"mb-1"}),n(s(c),{modelValue:s(e).policy_type,"onUpdate:modelValue":t[2]||(t[2]=l=>s(e).policy_type=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])):f("",!0),a("div",re,[n(d,{for:"",value:"Insurer",class:"mb-1"}),n(s(c),{modelValue:s(e).insurer,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).insurer=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ne,[n(d,{for:"",value:"Agency",class:"mb-1"}),n(s(c),{modelValue:s(e).agency,"onUpdate:modelValue":t[4]||(t[4]=l=>s(e).agency=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ie,[n(d,{for:"",value:"Client",class:"mb-1"}),n(s(c),{modelValue:s(e).client_ids,"onUpdate:modelValue":t[5]||(t[5]=l=>s(e).client_ids=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ue,[n(d,{for:"",value:"Department",class:"mb-1"}),n(s(c),{modelValue:s(e).department,"onUpdate:modelValue":t[6]||(t[6]=l=>s(e).department=l),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",de,[n(d,{for:"",value:"Class of Business",class:"mb-1"}),n(s(c),{modelValue:s(e).cob,"onUpdate:modelValue":t[7]||(t[7]=l=>s(e).cob=l),options:w.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",pe,[n(R,{onClick:g},{default:y(()=>t[16]||(t[16]=[v(" Cancel ")])),_:1}),n(W,{class:J(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:y(()=>t[17]||(t[17]=[v(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{De as default};
