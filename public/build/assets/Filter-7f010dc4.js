import{q as i,J as q,v as E,A as S,c as C,a as r,w as u,F as J,o as D,f as _,b as a,j as P,y as j,u as t,h as O,n as T,g as X}from"./app-2c1da7f5.js";import{_ as z}from"./Modal-98fb5f09.js";import{_ as L}from"./SecondaryButton-d436b234.js";import{_ as R}from"./SuccessButton-db3a9437.js";import{_ as d}from"./InputLabel-a4126be3.js";import{X as W}from"./vue-datepicker-bfd407c1.js";/* empty css             */import{s as c}from"./multiselect-c097d9e3.js";import{_ as G}from"./DarkButton-2f6a1584.js";import{h as H}from"./moment-a9aaa855.js";/* empty css                                                         */const K=a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Q={class:"p-6"},Z=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),ee=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1),te={class:"mt-6"},se={class:"row g-2"},oe={class:"col-md-6"},ae=a("option",{value:""},"All",-1),le=a("option",{value:"policy_period_end"},"Expiry Date",-1),re=[ae,le],ne={key:0,class:"col-md-6"},ie=a("hr",{style:{"margin-top":"30px"}},null,-1),de={class:"col-md-12"},ce={class:"col-md-12"},ue={class:"col-md-12"},me=a("hr",{style:{"margin-top":"30px"}},null,-1),pe={class:"col-md-12"},_e={class:"col-md-12"},fe={class:"mt-6 flex justify-end"},$e={__name:"Filter",props:{data:Array,filter_route:{type:String,required:!0}},setup($){const f=$,m=i(!1),v=i(!1);q().props.slug;const U=i([]),k=()=>{axios.get("/axios/fetch/policy-types").then(({data:s})=>{U.value=s.policy_types})},y=i([]),F=()=>{axios.get("/axios/fetch/clients/v2").then(({data:s})=>{y.value=s.clients})},g=i([]),N=()=>{axios.get("/axios/fetch/agencies").then(({data:s})=>{g.value=s.agencies})},h=i([]),A=()=>{axios.get("/axios/fetch/insurers").then(({data:s})=>{h.value=s.insurers})},b=i([]),M=()=>{axios.get("/axios/fetch/departments").then(({data:s})=>{b.value=s.departments})};i([]);const x=i([]),B=s=>{axios.post("/axios/fetch/cobs/v2",{department_ids:s}).then(({data:o})=>{x.value=o.cobs})};var n="";const e=E({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client_ids:[],agency:[],insurer:[],department:[],group:[],cob:[]}),I=()=>{m.value=!0,v.value=!1,k(),F(),N(),A(),M(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_type=n.date_type,e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.policy_type=n.policy_type,e.client_ids=n.client_ids,e.agency=n.agency,e.insurer=n.insurer,e.department=n.department,e.group=n.group,e.cob=n.cob)},Y=()=>{var s={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client_ids:e.client_ids,agency:e.agency,insurer:e.insurer,department:e.department,group:e.group,cob:e.cob};const o=new URLSearchParams(s).toString();var l;f.filter_route==="renewal"&&(l=`${route("renewal.index")}?${o}`),f.filter_route==="client"&&(l=`${route("renewal.client.index")}?${o}`),e.post(l,{preserveScroll:!0,onSuccess:w=>{p(),localStorage.setItem("filters",JSON.stringify(s))},onError:w=>{console.log(w)},onFinish:()=>{}})},p=()=>{m.value=!1,e.reset()},V=s=>H(s).format("YYYY-MM-DD");return S(()=>e.department,s=>{s&&s.length>0&&B(e.department)}),S(()=>e.date_value,s=>{e.date_value!=null?(e.from_date=V(e.date_value[0]),e.to_date=V(e.date_value[1])):(e.from_date="",e.to_date="")}),(s,o)=>(D(),C(J,null,[r(G,{onClick:I,type:"button",class:"mx-1"},{default:u(()=>[K,_(" Filters ")]),_:1}),r(z,{show:m.value,onClose:p},{default:u(()=>[a("form",{onSubmit:o[7]||(o[7]=X(l=>v.value?s.update():Y(),["prevent"]))},[a("div",Q,[Z,ee,a("div",te,[a("div",se,[a("div",oe,[r(d,{for:"",value:"Date",class:"mb-1"}),P(a("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).date_type=l),class:"form-control"},re,512),[[j,t(e).date_type]])]),t(e).date_type?(D(),C("div",ne,[r(d,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(t(W),{modelValue:t(e).date_value,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):O("",!0),ie,a("div",de,[r(d,{for:"",value:"Insurer",class:"mb-1"}),r(t(c),{modelValue:t(e).insurer,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).insurer=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ce,[r(d,{for:"",value:"Agency",class:"mb-1"}),r(t(c),{modelValue:t(e).agency,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).agency=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ue,[r(d,{for:"",value:"Client",class:"mb-1"}),r(t(c),{modelValue:t(e).client_ids,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).client_ids=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),me,a("div",pe,[r(d,{for:"",value:"Department",class:"mb-1"}),r(t(c),{modelValue:t(e).department,"onUpdate:modelValue":o[5]||(o[5]=l=>t(e).department=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",_e,[r(d,{for:"",value:"Class of Business",class:"mb-1"}),r(t(c),{modelValue:t(e).cob,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).cob=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",fe,[r(L,{onClick:p},{default:u(()=>[_(" Cancel ")]),_:1}),r(R,{class:T(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[_(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{$e as default};
