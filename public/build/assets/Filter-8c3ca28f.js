import{e as i,J as E,v as I,f as C,o as D,c as S,a as r,w as m,F as P,b as a,h as _,l as q,y as J,u as s,g as O,n as T,j as X}from"./app-2503355b.js";import{_ as z}from"./Modal-214ce95c.js";import{_ as L}from"./SecondaryButton-87a4c4ba.js";import{_ as R}from"./SuccessButton-55f9f62b.js";import{_ as d}from"./InputLabel-5fa8293c.js";import{X as W}from"./vue-datepicker-8fd9a4f4.js";/* empty css             */import{s as u}from"./multiselect-539c19fd.js";import{_ as G}from"./DarkButton-8664eec5.js";import{h as H}from"./moment-a9aaa855.js";/* empty css                                                         */const K={class:"p-6"},Q={class:"mt-6"},Z={class:"row g-2"},ee={class:"col-md-6"},te={key:0,class:"col-md-6"},se={class:"col-md-12"},oe={class:"col-md-12"},ae={class:"col-md-12"},le={class:"col-md-12"},re={class:"col-md-12"},ne={class:"mt-6 flex justify-end"},be={__name:"Filter",props:{filters:Object,data:Array,filter_route:{type:String,required:!0}},setup($){const p=$,c=i(!1),v=i(!1);E().props.slug;const U=i([]),k=()=>{axios.get("/axios/fetch/policy-types").then(({data:o})=>{U.value=o.policy_types})},y=i([]),F=()=>{axios.get("/axios/fetch/clients/v2").then(({data:o})=>{y.value=o.clients})},g=i([]),M=()=>{axios.get("/axios/fetch/agencies").then(({data:o})=>{g.value=o.agencies})},b=i([]),N=()=>{axios.get("/axios/fetch/insurers").then(({data:o})=>{b.value=o.insurers})},x=i([]),A=()=>{axios.get("/axios/fetch/departments").then(({data:o})=>{x.value=o.departments})};i([]);const h=i([]),B=o=>{axios.post("/axios/fetch/cobs/v2",{department_ids:o}).then(({data:t})=>{h.value=t.cobs})};var n="";const e=I({date_type:"",from_date:"",to_date:"",policy_type:[],client_ids:[],agency:[],insurer:[],department:[],group:[],cob:[]}),Y=()=>{c.value=!0,v.value=!1,k(),F(),M(),N(),A(),n=p.filters,e.date_type=n.date_type,e.from_date=n.from_date,e.to_date=n.to_date,e.policy_type=n.policy_type,e.client_ids=n.client_ids,e.agency=n.agency,e.insurer=n.insurer,e.department=n.department,e.group=n.group,e.cob=n.cob},j=()=>{var o={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client_ids:e.client_ids,agency:e.agency,insurer:e.insurer,department:e.department,group:e.group,cob:e.cob};const t=new URLSearchParams(o).toString();var l;p.filter_route==="renewal"&&(l=`${route("renewal.index")}?${t}`),p.filter_route==="client"&&(l=`${route("renewal.client.index")}?${t}`),e.post(l,{preserveScroll:!0,onSuccess:w=>{f(),localStorage.setItem("filters",JSON.stringify(o))},onError:w=>{console.log(w)},onFinish:()=>{}})},f=()=>{c.value=!1,e.reset()},V=o=>H(o).format("YYYY-MM-DD");return C(()=>e.department,o=>{o&&o.length>0&&B(e.department)}),C(()=>e.date_value,o=>{e.date_value!=null?(e.from_date=V(e.date_value[0]),e.to_date=V(e.date_value[1])):(e.from_date="",e.to_date="")}),(o,t)=>(D(),S(P,null,[r(G,{onClick:Y,type:"button",class:"mx-1"},{default:m(()=>t[8]||(t[8]=[a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),_(" Filters ")])),_:1}),r(z,{show:c.value,onClose:f},{default:m(()=>[a("form",{onSubmit:t[7]||(t[7]=X(l=>v.value?o.update():j(),["prevent"]))},[a("div",K,[t[14]||(t[14]=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),t[15]||(t[15]=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1)),a("div",Q,[a("div",Z,[a("div",ee,[r(d,{for:"",value:"Date",class:"mb-1"}),q(a("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).date_type=l),class:"form-control"},t[9]||(t[9]=[a("option",{value:""},"All",-1),a("option",{value:"policy_period_end"},"Expiry Date",-1)]),512),[[J,s(e).date_type]])]),s(e).date_type?(D(),S("div",te,[r(d,{for:"",value:s(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(s(W),{modelValue:s(e).date_value,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):O("",!0),t[10]||(t[10]=a("hr",{style:{"margin-top":"30px"}},null,-1)),a("div",se,[r(d,{for:"",value:"Insurer",class:"mb-1"}),r(s(u),{modelValue:s(e).insurer,"onUpdate:modelValue":t[2]||(t[2]=l=>s(e).insurer=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",oe,[r(d,{for:"",value:"Agency",class:"mb-1"}),r(s(u),{modelValue:s(e).agency,"onUpdate:modelValue":t[3]||(t[3]=l=>s(e).agency=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ae,[r(d,{for:"",value:"Client",class:"mb-1"}),r(s(u),{modelValue:s(e).client_ids,"onUpdate:modelValue":t[4]||(t[4]=l=>s(e).client_ids=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),t[11]||(t[11]=a("hr",{style:{"margin-top":"30px"}},null,-1)),a("div",le,[r(d,{for:"",value:"Department",class:"mb-1"}),r(s(u),{modelValue:s(e).department,"onUpdate:modelValue":t[5]||(t[5]=l=>s(e).department=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",re,[r(d,{for:"",value:"Class of Business",class:"mb-1"}),r(s(u),{modelValue:s(e).cob,"onUpdate:modelValue":t[6]||(t[6]=l=>s(e).cob=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",ne,[r(L,{onClick:f},{default:m(()=>t[12]||(t[12]=[_(" Cancel ")])),_:1}),r(R,{class:T(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:m(()=>t[13]||(t[13]=[_(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{be as default};
