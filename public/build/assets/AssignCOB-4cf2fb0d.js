import{e as n,v as j,o as v,i as A,w as f,x as C,b as s,u as m,c as h,t as p,g as D,l as F,z as O,h as b,d as z,F as P,a as k,n as T}from"./app-971f6f04.js";import{_ as K}from"./Modal-898b0b70.js";import{_ as L}from"./SuccessButton-ac18518b.js";import{_ as M}from"./SecondaryButton-a267b138.js";/* empty css                                                         */const Q={class:"p-6"},U={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},q={class:"text-sm text-gray-500"},G={key:0,class:"mr-2"},H={class:"mt-6"},J={class:"card"},R={class:"card-header"},W={class:"row"},X={class:"col-md-6"},Y={class:"card-body"},Z={class:"table-responsive"},ee={class:"table table-bordered table-sm table-hover"},se={class:"text-uppercase"},te=["checked"],oe=["value","checked","onChange"],ae={class:"card-footer"},le={class:""},ne=["disabled"],re=["disabled"],de={class:"mt-6 flex justify-end"},be={__name:"AssignCOB",props:{roles:Object,slug:Object},setup(ie,{expose:w}){const i=n(!1),S=n(!1),c=n([]),a=n(new Set),r=n(1),g=n(1),d=n({}),_=n(""),l=j({user_id:"",cob_id:[]}),I=()=>{l.cob_id=Array.from(a.value),l.post(route("user.assign-cob"),{preserveScroll:!0,onSuccess:()=>{i.value=!1},onError:()=>{},onFinish:()=>{}})},$=t=>{i.value=!0,S.value=!0,l.user_id=t,l.cob_id=[],a.value=new Set,E(t)},E=async t=>{try{(await C.get(`/users/selected-cob/${t}`)).data.items.forEach(y=>a.value.add(parseInt(y))),u()}catch(e){console.error("Error fetching saved items:",e)}},x=()=>{i.value=!1,l.reset()},u=async(t=1)=>{try{const e=await C.get("/axios/fetch/cobs",{params:{page:t,search:_.value}});c.value=e.data.data,r.value=e.data.current_page,g.value=e.data.last_page,d.value[t]=d.value[t]||!1}catch(e){console.error("Error fetching items:",e)}},B=()=>{const t=r.value,e=!d.value[t];d.value[t]=e,e?c.value.forEach(o=>a.value.add(o.id)):c.value.forEach(o=>a.value.delete(o.id))},N=t=>a.value.has(t),V=t=>{a.value.has(t)?a.value.delete(t):a.value.add(t)};return w({assignCob:t=>$(t)}),(t,e)=>(v(),A(K,{show:i.value,onClose:x},{default:f(()=>[s("div",Q,[s("h2",U,[e[5]||(e[5]=s("span",null,"Assign Class of Business",-1)),s("span",q,[m(l).user_id?(v(),h("span",G,"ID #"+p(m(l).user_id),1)):D("",!0)])]),e[13]||(e[13]=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1)),s("div",H,[s("div",J,[s("div",R,[s("div",W,[s("div",X,[F(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),class:"form-control mr-2 mb-2",placeholder:"Search",style:{width:"100%"},onKeyup:e[1]||(e[1]=o=>u())},null,544),[[O,_.value]])])])]),s("div",Y,[s("div",Z,[s("table",ee,[s("thead",se,[s("tr",null,[s("th",null,[s("input",{type:"checkbox",checked:d.value[r.value],onChange:B},null,40,te),e[6]||(e[6]=b(" ID "))]),e[7]||(e[7]=s("th",null,"Name",-1)),e[8]||(e[8]=s("th",null,"Code",-1))])]),s("tbody",null,[(v(!0),h(P,null,z(c.value,o=>(v(),h("tr",{key:o.id},[s("td",null,[s("input",{type:"checkbox",value:o.id,checked:N(o.id),onChange:y=>V(o.id)},null,40,oe),b(" "+p(o.id),1)]),s("td",null,p(o.class_name),1),s("td",null,p(o.code),1)]))),128))])])])]),s("div",ae,[s("div",le,[s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===1,onClick:e[2]||(e[2]=o=>u(r.value-1))},e[9]||(e[9]=[s("i",{class:"bx bx-arrow-to-left"},null,-1)]),8,ne),s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===g.value,onClick:e[3]||(e[3]=o=>u(r.value+1))},e[10]||(e[10]=[s("i",{class:"bx bx-arrow-to-right"},null,-1)]),8,re)])])])]),s("div",de,[k(M,{onClick:x},{default:f(()=>e[11]||(e[11]=[b(" Cancel ")])),_:1}),k(L,{class:T(["ml-3",{"opacity-25":m(l).processing}]),disabled:m(l).processing,onClick:e[4]||(e[4]=o=>I())},{default:f(()=>e[12]||(e[12]=[b(" Save ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"]))}};export{be as default};
