import{J as B,e as N,o,c as i,a as y,s as S,b as e,F as h,d as $,t as n,h as p,g as a,u as d,i as b,w as u,p as E,v as g}from"./app-2503355b.js";import{S as c}from"./sweetalert2.all-4b615677.js";import{_ as f}from"./IconButton-43a4754e.js";import F from"./CreateEdit-739cd279.js";import"./InputError-dd830035.js";import"./vue-datepicker-8fd9a4f4.js";/* empty css             */import"./PrimaryButton-1d84b439.js";const T={style:{"overflow-x":"auto"}},A={class:"table table-bordered table-sm text-uppercase"},D=["href"],P=["onClick"],V={class:"badge bg-secondary"},Y=["href"],O={class:"badge bg-dark"},R={class:"badge bg-success mr-1"},j={class:"badge bg-warning mr-1"},q={key:1},M={__name:"PolicyTable",props:{policies:Array,filter:Object,detail:Boolean},setup(r){const m=B().props.can,_=N(null),k=l=>{_.value.edit(l)},w=l=>{const t=g({id:l});c.fire({title:"Are you sure?",text:"You will not be able to recover this policy!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async s=>{s.isConfirmed&&t.delete(route("policy.delete"),{preserveScroll:!0,onSuccess:()=>{c.fire("Deleted!","Your policy has been deleted.","success")},onError:()=>{},onFinish:()=>t.reset()})})},C=l=>{g({base_doc_no:l}).post(route("policy.detail-2"),{preserveScroll:!0,onSuccess:()=>{c.fire("Updated!","The claim update successfully.","success"),close()},onError:s=>{s.status==!1&&c.fire("Error!",s.message,"error")},onFinish:()=>{}})};return(l,t)=>(o(),i(h,null,[y(F,S(l.$props,{ref_key:"create_edit_ref",ref:_,create:!1}),null,16),e("div",T,[e("table",A,[t[8]||(t[8]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Sr."),e("th",{style:{"min-width":"250px"}},"Policy No"),e("th",{style:{"min-width":"200px"}},"Client Name"),e("th",{style:{"min-width":"200px"}},"Agency Name"),e("th",{style:{"min-width":"120px"}},"COB Name"),e("th",{style:{"min-width":"120px"}},"Expiry Date"),e("th",{style:{"min-width":"80px"}},"Claims"),e("th",{style:{"min-width":"80px"}},"Type"),e("th",{style:{"min-width":"150px"}},"Action")])],-1)),e("tbody",null,[r.policies.data.length>0?(o(!0),i(h,{key:0},$(r.policies.data,(s,v)=>(o(),i("tr",null,[e("td",null,n((r.policies.current_page-1)*r.policies.per_page+v+1),1),e("td",null,[e("a",{href:l.route("policy.detail",s.p_id),target:"_blank"},[p(n(s.policy_no)+" ",1),t[0]||(t[0]=e("i",{class:"bx bx-link-external"},null,-1))],8,D),t[1]||(t[1]=p()),t[2]||(t[2]=e("br",null,null,-1)),s.policy_type=="endorsement"?(o(),i("button",{key:0,onClick:x=>C(s.base_doc_no)},[e("small",null,n(s.base_doc_no),1)],8,P)):a("",!0)]),e("td",null,n(s.client_name),1),e("td",null,n(s.agency_name),1),e("td",null,[e("span",V,n(s.cob_name),1)]),e("td",null,n(s.expiry_date),1),e("td",null,[e("a",{href:`${l.route("claim.index")}?policy_id=${s.p_id}`,target:"_blank"},[e("span",O,[p(n(s.claim_count)+" ",1),t[3]||(t[3]=e("i",{class:"bx bx-link-external"},null,-1))])],8,Y)]),e("td",null,[e("span",R,n(s.policy_type),1),e("span",j,n(s.policy_lead_type),1)]),e("td",null,[d(m).policy_update?(o(),b(f,{key:0,class:"m-1",onClick:x=>k(s.p_id)},{default:u(()=>t[4]||(t[4]=[e("i",{class:"bx bx-edit bx-text-md"},null,-1)])),_:2},1032,["onClick"])):a("",!0),d(m).policy_detail&&r.detail?(o(),b(d(E),{key:1,href:l.route("policy.detail",s.p_id),class:"m-1"},{default:u(()=>[y(f,null,{default:u(()=>t[5]||(t[5]=[e("i",{class:"bx bxs-show bx-text-md"},null,-1)])),_:1})]),_:2},1032,["href"])):a("",!0),d(m).policy_delete?(o(),b(f,{key:2,class:"m-1",onClick:x=>w(s.p_id)},{default:u(()=>t[6]||(t[6]=[e("i",{class:"bx bxs-trash bx-text-md text-danger"},null,-1)])),_:2},1032,["onClick"])):a("",!0)])]))),256)):(o(),i("tr",q,t[7]||(t[7]=[e("td",{colspan:"10",class:"text-center"},"No Record Found",-1)])))])])])],64))}};export{M as default};
