import{q as d,J as M,v as N,c,b as s,f as w,g as B,j as b,y as D,u as o,F,r as $,a as n,s as f,t as h,h as E,z as y,o as u}from"./app-e8025baf.js";import{_ as m}from"./InputError-dd3e745e.js";import{s as I}from"./multiselect-f753b6b6.js";/* empty css                                                         */const L={class:"col"},j=s("i",{class:"bx bx-plus"},null,-1),T={key:0,class:"modal fade show",id:"exampleLargeModal",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},q={class:"modal-dialog modal-lg"},z={class:"modal-content"},A=s("h5",{class:"modal-title"},"Business Class",-1),J={class:"modal-body"},O={class:"row g-3"},P={class:"col-md-4"},G=s("label",{for:"input21",class:"form-label"},"Department",-1),H=["value"],K={class:"col-md-6"},Q=s("label",{for:"input13",class:"form-label"},"Class Name",-1),R={class:"col-md-2"},W=s("label",{for:"input13",class:"form-label"},"Percentage",-1),X={class:"col-md-12"},Y=s("label",{for:"input21",class:"form-label"},"Insurer",-1),Z={class:"modal-footer"},ss={type:"submit",class:"btn btn-primary btn-sm"},ns={__name:"CreateUpdate",props:{businessClass:Object},setup(es,{expose:x}){const r=d(!1),i=d(!1);M().props.businessClass;const p=d([]),v=d([]),C=()=>{r.value=!0,i.value=!1,y.get("/business-class/create").then(({data:l})=>{p.value=l.insurances,v.value=l.departments})},e=N({business_class_id:"",class_name:"",percentage:"",insurance_id:[],department_id:""}),V=()=>{e.post(route("businessClass.store"),{preserveScroll:!0,onSuccess:()=>_(),onError:()=>g(),onFinish:()=>{}})},g=()=>{},_=()=>{r.value=!1,e.reset()},S=l=>{const t=/^[0-9]*$/,a=l.target.value;t.test(a)?e.percentage=a:l.preventDefault()},k=l=>{r.value=!0,i.value=!0,y.get(`/business-class/edit/${l}`).then(({data:t})=>{e.business_class_id=t.business_cls.id,e.class_name=t.business_cls.class_name,e.percentage=t.business_cls.percentage,e.department_id=t.business_cls.department_id,p.value=t.insurances,e.insurance_id=t.selected_insurers})};x({edit:l=>k(l)});const U=()=>{e.post(route("businessClass.update"),{preserveScroll:!0,onSuccess:()=>_(),onError:()=>g(),onFinish:()=>{}})};return(l,t)=>(u(),c("div",L,[s("button",{type:"button",class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleLargeModal",onClick:C},[j,w("Add")]),r.value?(u(),c("div",T,[s("div",q,[s("div",z,[s("form",{onSubmit:t[4]||(t[4]=B(a=>i.value?U():V(),["prevent"]))},[s("div",{class:"modal-header"},[A,s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:_})]),s("div",J,[s("div",O,[s("div",P,[G,b(s("select",{id:"input21",class:"form-select","onUpdate:modelValue":t[0]||(t[0]=a=>o(e).department_id=a)},[(u(!0),c(F,null,$(v.value,a=>(u(),c("option",{key:a.id,value:a.id},h(a.name),9,H))),128))],512),[[D,o(e).department_id]]),n(m,{message:o(e).errors.department_id},null,8,["message"])]),s("div",K,[Q,b(s("input",{type:"text",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":t[1]||(t[1]=a=>o(e).class_name=a)},null,512),[[f,o(e).class_name]]),n(m,{message:o(e).errors.class_name},null,8,["message"])]),s("div",R,[W,b(s("input",{type:"number",class:"form-control",id:"input13",placeholder:"","onUpdate:modelValue":t[2]||(t[2]=a=>o(e).percentage=a),onInput:S},null,544),[[f,o(e).percentage]]),n(m,{message:o(e).errors.percentage},null,8,["message"])]),s("div",X,[Y,n(o(I),{style:{"margin-top":"3px !important"},mode:"tags",searchable:!1,modelValue:o(e).insurance_id,"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).insurance_id=a),options:p.value},null,8,["modelValue","options"]),n(m,{message:o(e).errors.insurance_id},null,8,["message"])])])]),s("div",Z,[s("button",ss,h(i.value?"Update":"Save"),1)])],32)])])])):E("",!0)]))}};export{ns as default};
