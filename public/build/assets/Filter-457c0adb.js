import{q as i,J as T,v as Y,A as _,c as U,a as n,w as u,F as q,o as w,f,b as a,j as E,y as J,u as t,h as j,n as G,g as O}from"./app-4d0731cb.js";import{_ as X,a as z}from"./SecondaryButton-dec1a0ba.js";import{_ as L}from"./SuccessButton-67274df0.js";import{_ as d}from"./InputLabel-967ac568.js";import{X as R}from"./vue-datepicker-d9636824.js";/* empty css             */import{s as c}from"./multiselect-4fd4c722.js";import{_ as W}from"./DarkButton-a539f5f8.js";import{h as H}from"./moment-a9aaa855.js";/* empty css                                                         */const K=a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Q={class:"p-6"},Z=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),ee=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1),te={class:"mt-6"},oe={class:"row g-2"},se={class:"col-md-6"},ae=a("option",{value:""},"All",-1),le=a("option",{value:"date_of_issuance"},"Issuance Date",-1),ne=a("option",{value:"policy_period_start"},"Inception Date",-1),re=a("option",{value:"policy_period_end"},"Expiry Date",-1),ie=a("option",{value:"created_at"},"Created At",-1),de=[ae,le,ne,re,ie],ce={key:0,class:"col-md-6"},ue=a("hr",{style:{"margin-top":"30px"}},null,-1),pe={class:"col-md-6"},me={class:"col-md-6"},_e={class:"col-md-12"},fe={class:"col-md-12"},ve=a("hr",{style:{"margin-top":"30px"}},null,-1),ge={class:"col-md-12"},ye={class:"col-md-12"},he={class:"col-md-12"},be={class:"mt-6 flex justify-end"},Ie={__name:"Filter",props:{data:Array,filter_route:{type:String,required:!0}},setup(xe){const p=i(!1),v=i(!1);T().props.slug;const g=i([]),$=()=>{axios.get("/axios/fetch/policy-types").then(({data:o})=>{g.value=o.policy_types})},y=i([]),k=()=>{axios.get("/axios/fetch/clients/v2").then(({data:o})=>{y.value=o.clients})},h=i([]),F=()=>{axios.get("/axios/fetch/agencies").then(({data:o})=>{h.value=o.agencies})},b=i([]),A=()=>{axios.get("/axios/fetch/insurers").then(({data:o})=>{b.value=o.insurers})},x=i([]),I=()=>{axios.get("/axios/fetch/departments").then(({data:o})=>{x.value=o.departments})},V=i([]),N=o=>{axios.post("/axios/fetch/groups",{department_ids:o}).then(({data:s})=>{V.value=s.groups})},D=i([]),M=o=>{axios.post("/axios/fetch/cobs/v2",{group_ids:o}).then(({data:s})=>{D.value=s.cobs})};var r="";const e=Y({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),B=()=>{p.value=!0,v.value=!1,$(),k(),F(),A(),I(),r=localStorage.getItem("filters"),r&&(r=JSON.parse(r),e.date_type=r.date_type,e.date_value=r.date_value,e.from_date=r.from_date,e.to_date=r.to_date,e.policy_type=r.policy_type,e.client=r.client,e.agency=r.agency,e.insurer=r.insurer,e.department=r.department,e.group=r.group,e.cob=r.cob)},P=()=>{var o={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,department:e.department,group:e.group,cob:e.cob};const s=new URLSearchParams(o).toString();var l;l=`${route("client.index")}?${s}`,e.post(l,{preserveScroll:!0,onSuccess:C=>{m(),localStorage.setItem("filters",JSON.stringify(o))},onError:C=>{console.log(C)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()},S=o=>H(o).format("YYYY-MM-DD");return _(()=>e.department,o=>{o&&o.length>0&&N(e.department)}),_(()=>e.group,o=>{o&&o.length>0&&M(e.group)}),_(()=>e.date_value,o=>{e.date_value!=null?(e.from_date=S(e.date_value[0]),e.to_date=S(e.date_value[1])):(e.from_date="",e.to_date="")}),(o,s)=>(w(),U(q,null,[n(W,{onClick:B,type:"button",class:"mx-1"},{default:u(()=>[K,f(" Filters ")]),_:1}),n(X,{show:p.value,onClose:m},{default:u(()=>[a("form",{onSubmit:s[9]||(s[9]=O(l=>v.value?o.update():P(),["prevent"]))},[a("div",Q,[Z,ee,a("div",te,[a("div",oe,[a("div",se,[n(d,{for:"",value:"Date Type",class:"mb-1"}),E(a("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).date_type=l),class:"form-control"},de,512),[[J,t(e).date_type]])]),t(e).date_type?(w(),U("div",ce,[n(d,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(t(R),{modelValue:t(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):j("",!0),ue,a("div",pe,[n(d,{for:"",value:"Policy Type",class:"mb-1"}),n(t(c),{modelValue:t(e).policy_type,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).policy_type=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",me,[n(d,{for:"",value:"Insurer",class:"mb-1"}),n(t(c),{modelValue:t(e).insurer,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).insurer=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",_e,[n(d,{for:"",value:"Agency",class:"mb-1"}),n(t(c),{modelValue:t(e).agency,"onUpdate:modelValue":s[4]||(s[4]=l=>t(e).agency=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",fe,[n(d,{for:"",value:"Client",class:"mb-1"}),n(t(c),{modelValue:t(e).client,"onUpdate:modelValue":s[5]||(s[5]=l=>t(e).client=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),ve,a("div",ge,[n(d,{for:"",value:"Department",class:"mb-1"}),n(t(c),{modelValue:t(e).department,"onUpdate:modelValue":s[6]||(s[6]=l=>t(e).department=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ye,[n(d,{for:"",value:"Group",class:"mb-1"}),n(t(c),{modelValue:t(e).group,"onUpdate:modelValue":s[7]||(s[7]=l=>t(e).group=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",he,[n(d,{for:"",value:"Class of Business",class:"mb-1"}),n(t(c),{modelValue:t(e).cob,"onUpdate:modelValue":s[8]||(s[8]=l=>t(e).cob=l),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",be,[n(z,{onClick:m},{default:u(()=>[f(" Cancel ")]),_:1}),n(L,{class:G(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[f(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ie as default};
