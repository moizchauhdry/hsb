import{q as n,v as V,e as A,w as b,G as C,o as _,b as e,u as v,c as f,t as h,h as D,j as F,s as O,f as m,r as P,F as T,a as k,n as q}from"./app-b55fb7f9.js";import{a as z,_ as G}from"./SecondaryButton-989864b5.js";import{_ as K}from"./SuccessButton-9940b50e.js";/* empty css                                                         */const L={class:"p-6"},M={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},Q=e("span",null,"Assign Class of Business",-1),U={class:"text-sm text-gray-500"},H={key:0,class:"mr-2"},J=e("p",{class:"mt-1 text-sm text-gray-600"},[e("hr")],-1),R={class:"mt-6"},W={class:"card"},X={class:"card-header"},Y={class:"row"},Z={class:"col-md-6"},ee={class:"card-body"},se={class:"table-responsive"},te={class:"table table-bordered table-sm table-hover"},ae={class:"text-uppercase"},oe=["checked"],le=e("th",null,"Name",-1),ne=e("th",null,"Code",-1),ce=["value","checked","onChange"],re={class:"card-footer"},de={class:""},ie=["disabled"],ue=e("i",{class:"bx bx-arrow-to-left"},null,-1),_e=[ue],ve=["disabled"],he=e("i",{class:"bx bx-arrow-to-right"},null,-1),me=[he],pe={class:"mt-6 flex justify-end"},Ce={__name:"AssignCOB",props:{roles:Object,slug:Object},setup(be,{expose:w}){const d=n(!1),S=n(!1),i=n([]),o=n(new Set),c=n(1),g=n(1),r=n({}),p=n(""),l=V({user_id:"",cob_id:[]}),I=()=>{l.cob_id=Array.from(o.value),l.post(route("user.assign-cob"),{preserveScroll:!0,onSuccess:()=>{d.value=!1},onError:()=>{},onFinish:()=>{}})},$=t=>{d.value=!0,S.value=!0,l.user_id=t,l.cob_id=[],o.value=new Set,E(t)},E=async t=>{try{(await C.get(`/users/selected-cob/${t}`)).data.items.forEach(x=>o.value.add(parseInt(x))),u()}catch(s){console.error("Error fetching saved items:",s)}},y=()=>{d.value=!1,l.reset()},u=async(t=1)=>{try{const s=await C.get("/axios/fetch/cobs",{params:{page:t,search:p.value}});i.value=s.data.data,c.value=s.data.current_page,g.value=s.data.last_page,r.value[t]=r.value[t]||!1}catch(s){console.error("Error fetching items:",s)}},B=()=>{const t=c.value,s=!r.value[t];r.value[t]=s,s?i.value.forEach(a=>o.value.add(a.id)):i.value.forEach(a=>o.value.delete(a.id))},j=t=>o.value.has(t),N=t=>{o.value.has(t)?o.value.delete(t):o.value.add(t)};return w({assignCob:t=>$(t)}),(t,s)=>(_(),A(z,{show:d.value,onClose:y},{default:b(()=>[e("div",L,[e("h2",M,[Q,e("span",U,[v(l).user_id?(_(),f("span",H,"ID #"+h(v(l).user_id),1)):D("",!0)])]),J,e("div",R,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[F(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),class:"form-control mr-2 mb-2",placeholder:"Search",style:{width:"100%"},onKeyup:s[1]||(s[1]=a=>u())},null,544),[[O,p.value]])])])]),e("div",ee,[e("div",se,[e("table",te,[e("thead",ae,[e("tr",null,[e("th",null,[e("input",{type:"checkbox",checked:r.value[c.value],onChange:B},null,40,oe),m(" ID ")]),le,ne])]),e("tbody",null,[(_(!0),f(T,null,P(i.value,a=>(_(),f("tr",{key:a.id},[e("td",null,[e("input",{type:"checkbox",value:a.id,checked:j(a.id),onChange:x=>N(a.id)},null,40,ce),m(" "+h(a.id),1)]),e("td",null,h(a.class_name),1),e("td",null,h(a.code),1)]))),128))])])])]),e("div",re,[e("div",de,[e("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:c.value===1,onClick:s[2]||(s[2]=a=>u(c.value-1))},_e,8,ie),e("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:c.value===g.value,onClick:s[3]||(s[3]=a=>u(c.value+1))},me,8,ve)])])])]),e("div",pe,[k(G,{onClick:y},{default:b(()=>[m(" Cancel ")]),_:1}),k(K,{class:q(["ml-3",{"opacity-25":v(l).processing}]),disabled:v(l).processing,onClick:s[4]||(s[4]=a=>I())},{default:b(()=>[m(" Save ")]),_:1},8,["class","disabled"])])])]),_:1},8,["show"]))}};export{Ce as default};
