import{m as r,Q as w,T as S,o as d,e as U,w as m,b as s,t as o,u as i,c as p,h as k,d as $,F,a as h,f as y,n as B,g as N}from"./app-af507bfe.js";/* empty css                                               */import{_ as V,a as E}from"./SecondaryButton-13ebe2c5.js";import{_ as L}from"./SuccessButton-ba3e303f.js";const j={class:"p-6"},D={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},M={class:"text-sm text-gray-500"},P={key:0,class:"mr-2"},T={class:"mt-6"},z={class:"row g-3"},A={class:"col-md-12"},I={class:"card mt-3",style:{height:"300px","overflow-y":"auto"}},O={class:"card-body"},Q={class:"table-responsive"},q={id:"example",class:"table table-striped table-bordered",style:{width:"100%"}},G=["src"],H={class:"mt-6 flex justify-end"},Y={__name:"Upload",setup(J,{expose:v}){const c=r(!1),n=r(!1),_=r([]);w().props.asset_url;const g=e=>{const l=e.target.files[0];t.file=l},t=S({policy_id:"",policy_claim_id:"",file:""}),b=()=>{t.post(route("claim.store.claim-upload"),{preserveScroll:!0,onSuccess:e=>{var l=e.props.flash.data;f(l.policy_claim_id,l.policy_id),t.uploads=""},onError:()=>{},onFinish:()=>{}})},u=()=>{c.value=!1,t.reset()},x=(e,l)=>{c.value=!0,n.value=!1,t.policy_claim_id=e,t.policy_id=l,f(e,l)},f=(e,l)=>{axios.get(`/claims/fetch/claim-uploads/${e}/${l}`).then(({data:a})=>{console.log(a),_.value=a.claim_uploads})};return v({claimUpload:(e,l)=>x(e,l)}),(e,l)=>(d(),U(V,{show:c.value,onClose:u},{default:m(()=>[s("form",{onSubmit:l[0]||(l[0]=N(a=>n.value?e.update():b(),["prevent"]))},[s("div",j,[s("h2",D,[s("span",null,o(n.value?"Edit":"Add")+" Upload",1),s("span",M,[i(t).policy_claim_id?(d(),p("span",P,"CLM #"+o(i(t).policy_claim_id),1)):k("",!0),s("span",null,"POL #"+o(i(t).policy_id),1)])]),l[4]||(l[4]=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1)),s("div",T,[s("div",z,[s("div",A,[l[1]||(l[1]=s("label",{for:"input13",class:"form-label"},"Uploads",-1)),s("input",{type:"file",class:"form-control",id:"input13",onChange:g},null,32)])]),s("div",I,[s("div",O,[s("div",Q,[s("table",q,[l[2]||(l[2]=s("thead",null,[s("tr",null,[s("th",null,"Sr #"),s("th",null,"Upload #"),s("th",null,"Policy/Claim ID"),s("th",null,"File")])],-1)),s("tbody",null,[(d(!0),p(F,null,$(_.value,(a,C)=>(d(),p("tr",{key:a.id},[s("td",null,o(++C),1),s("td",null,o(a.id),1),s("td",null,o(a.policy_id)+"/"+o(a.policy_claim_id),1),s("td",null,[s("img",{src:"/storage/"+a.file_url,alt:"",style:{height:"100px",width:"100px"}},null,8,G)])]))),128))])])])])])]),s("div",H,[h(E,{onClick:u},{default:m(()=>l[3]||(l[3]=[y("Close")])),_:1}),h(L,{class:B(["ml-3",{"opacity-25":i(t).processing}]),disabled:i(t).processing},{default:m(()=>[y(o(n.value?"Save & Update":"Save & Submit"),1)]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"]))}};export{Y as default};
