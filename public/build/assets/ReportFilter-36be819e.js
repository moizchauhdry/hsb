import{q as r,J as B,v as P,c as S,a as l,w as u,F as T,o as C,f as _,b as s,j as q,y as E,u as t,h as J,n as M,g as j}from"./app-02db4d09.js";import{_ as O,a as R}from"./SecondaryButton-c981aee9.js";import{_ as X}from"./SuccessButton-27082f33.js";import{_ as c}from"./InputLabel-b49d33fa.js";import{X as z}from"./vue-datepicker-b5c19449.js";/* empty css             */import{s as d}from"./multiselect-d8f2656d.js";import{_ as L}from"./DarkButton-1b93af11.js";/* empty css                                                         */const W=s("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),G={class:"p-6"},H=s("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),K=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1),Q={class:"mt-6"},Y={class:"row g-2"},Z={class:"col-md-6"},ee=s("option",{value:""},"All",-1),te=s("option",{value:"date_of_issuance"},"Issuance Date",-1),se=s("option",{value:"policy_period_start"},"Inception Date",-1),oe=s("option",{value:"policy_period_end"},"Expiry Date",-1),ae=s("option",{value:"created_at"},"Created At",-1),le=[ee,te,se,oe,ae],ie={key:0,class:"col-md-6"},ne={class:"col-md-6"},re={class:"col-md-6"},ce={class:"col-md-12"},de={class:"col-md-12"},ue={class:"col-md-12"},pe={class:"mt-6 flex justify-end"},Ve={__name:"ReportFilter",props:{data:Array,filter_route:{type:String,required:!0}},setup($){const f=$,p=r(!1),v=r(!1),w=B().props.slug,y=r([]),U=()=>{axios.get("/axios/fetch/policy-types").then(({data:i})=>{y.value=i.policy_types})},g=r([]),F=()=>{axios.get("/axios/fetch/clients/v2").then(({data:i})=>{g.value=i.clients})},h=r([]),k=()=>{axios.get("/axios/fetch/agencies").then(({data:i})=>{h.value=i.agencies})},b=r([]),I=()=>{axios.get("/axios/fetch/cobs/v2").then(({data:i})=>{b.value=i.cobs})},x=r([]),N=()=>{axios.get("/axios/fetch/insurers").then(({data:i})=>{x.value=i.insurers})};var n="";const e=P({date_type:"",date_value:"",policy_type:[],client:[],agency:[],cob:[],insurer:[]}),A=()=>{p.value=!0,v.value=!1,U(),F(),k(),I(),N(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_type=n.date_type,e.date_value=n.date_value,e.policy_type=n.policy_type,e.client=n.client,e.agency=n.agency,e.cob=n.cob,e.insurer=n.insurer)},D=()=>{var i={date_type:e.date_type,date_value:e.date_value,policy_type:e.policy_type,client:e.client,agency:e.agency,cob:e.cob,insurer:e.insurer};const o=new URLSearchParams(i).toString();var a;f.filter_route==="report"&&(a=`${route("report.index",w)}?${o}`),f.filter_route==="policy"&&(a=`${route("policy.index")}?${o}`),e.post(a,{preserveScroll:!0,onSuccess:V=>{m(),localStorage.setItem("filters",JSON.stringify(i))},onError:V=>{console.log(V)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()};return(i,o)=>(C(),S(T,null,[l(L,{onClick:A,type:"button",class:"mx-1"},{default:u(()=>[W,_(" Filters ")]),_:1}),l(O,{show:p.value,onClose:m},{default:u(()=>[s("form",{onSubmit:o[7]||(o[7]=j(a=>v.value?i.update():D(),["prevent"]))},[s("div",G,[H,K,s("div",Q,[s("div",Y,[s("div",Z,[l(c,{for:"",value:"Date Type",class:"mb-1"}),q(s("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).date_type=a),class:"form-control"},le,512),[[E,t(e).date_type]])]),t(e).date_type?(C(),S("div",ie,[l(c,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),l(t(z),{modelValue:t(e).date_value,"onUpdate:modelValue":o[1]||(o[1]=a=>t(e).date_value=a),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):J("",!0),s("div",ne,[l(c,{for:"",value:"Policy Type",class:"mb-1"}),l(t(d),{modelValue:t(e).policy_type,"onUpdate:modelValue":o[2]||(o[2]=a=>t(e).policy_type=a),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",re,[l(c,{for:"",value:"Insurer",class:"mb-1"}),l(t(d),{modelValue:t(e).insurer,"onUpdate:modelValue":o[3]||(o[3]=a=>t(e).insurer=a),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ce,[l(c,{for:"",value:"Agency",class:"mb-1"}),l(t(d),{modelValue:t(e).agency,"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).agency=a),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",de,[l(c,{for:"",value:"Client",class:"mb-1"}),l(t(d),{modelValue:t(e).client,"onUpdate:modelValue":o[5]||(o[5]=a=>t(e).client=a),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ue,[l(c,{for:"",value:"Class of Business",class:"mb-1"}),l(t(d),{modelValue:t(e).cob,"onUpdate:modelValue":o[6]||(o[6]=a=>t(e).cob=a),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),s("div",pe,[l(R,{onClick:m},{default:u(()=>[_(" Cancel ")]),_:1}),l(X,{class:M(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[_(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ve as default};
