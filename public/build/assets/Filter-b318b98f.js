import{q as r,J as T,v as q,A as C,c as U,a as n,w as u,F as E,o as w,f as _,b as o,j as J,y as M,u as t,h as j,n as G,g as O}from"./app-539b0ff2.js";import{_ as X,a as z}from"./SecondaryButton-b7b2c45c.js";import{_ as L}from"./SuccessButton-b3702d6d.js";import{_ as c}from"./InputLabel-eb7520db.js";import{X as R}from"./vue-datepicker-afe58893.js";/* empty css             */import{s as d}from"./multiselect-cd481f66.js";import{_ as W}from"./DarkButton-97ae4c45.js";/* empty css                                                         */const H=o("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),K={class:"p-6"},Q=o("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),Y=o("p",{class:"mt-1 text-sm text-gray-600"},[o("hr")],-1),Z={class:"mt-6"},ee={class:"row g-2"},te={class:"col-md-6"},se=o("option",{value:""},"All",-1),oe=o("option",{value:"date_of_issuance"},"Issuance Date",-1),ae=o("option",{value:"policy_period_start"},"Inception Date",-1),le=o("option",{value:"policy_period_end"},"Expiry Date",-1),ne=o("option",{value:"created_at"},"Created At",-1),ie=[se,oe,ae,le,ne],re={key:0,class:"col-md-6"},ce=o("hr",{style:{"margin-top":"30px"}},null,-1),de={class:"col-md-6"},ue={class:"col-md-6"},pe={class:"col-md-12"},me={class:"col-md-12"},_e=o("hr",{style:{"margin-top":"30px"}},null,-1),fe={class:"col-md-12"},ve={class:"col-md-12"},ge={class:"col-md-12"},ye={class:"mt-6 flex justify-end"},Fe={__name:"Filter",props:{data:Array,filter_route:{type:String,required:!0}},setup(he){const p=r(!1),f=r(!1);T().props.slug;const v=r([]),$=()=>{axios.get("/axios/fetch/policy-types").then(({data:a})=>{v.value=a.policy_types})},g=r([]),D=()=>{axios.get("/axios/fetch/clients/v2").then(({data:a})=>{g.value=a.clients})},y=r([]),F=()=>{axios.get("/axios/fetch/agencies").then(({data:a})=>{y.value=a.agencies})},h=r([]),k=()=>{axios.get("/axios/fetch/insurers").then(({data:a})=>{h.value=a.insurers})},b=r([]),A=()=>{axios.get("/axios/fetch/departments").then(({data:a})=>{b.value=a.departments})},x=r([]),I=a=>{axios.post("/axios/fetch/groups",{department_ids:a}).then(({data:s})=>{x.value=s.groups})},V=r([]),N=a=>{axios.post("/axios/fetch/cobs/v2",{group_ids:a}).then(({data:s})=>{V.value=s.cobs})};var i="";const e=q({date_type:"",date_value:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),B=()=>{p.value=!0,f.value=!1,$(),D(),F(),k(),A(),i=localStorage.getItem("filters"),i&&(i=JSON.parse(i),e.date_type=i.date_type,e.date_value=i.date_value,e.policy_type=i.policy_type,e.client=i.client,e.agency=i.agency,e.insurer=i.insurer,e.department=i.department,e.group=i.group,e.cob=i.cob)},P=()=>{var a={date_type:e.date_type,date_value:e.date_value,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,department:e.department,group:e.group,cob:e.cob};const s=new URLSearchParams(a).toString();var l;l=`${route("client.index")}?${s}`,e.post(l,{preserveScroll:!0,onSuccess:S=>{m(),localStorage.setItem("filters",JSON.stringify(a))},onError:S=>{console.log(S)},onFinish:()=>{}})},m=()=>{p.value=!1,e.reset()};return C(()=>e.department,a=>{a&&a.length>0&&I(e.department)}),C(()=>e.group,a=>{a&&a.length>0&&N(e.group)}),(a,s)=>(w(),U(E,null,[n(W,{onClick:B,type:"button",class:"mx-1"},{default:u(()=>[H,_(" Filters ")]),_:1}),n(X,{show:p.value,onClose:m},{default:u(()=>[o("form",{onSubmit:s[9]||(s[9]=O(l=>f.value?a.update():P(),["prevent"]))},[o("div",K,[Q,Y,o("div",Z,[o("div",ee,[o("div",te,[n(c,{for:"",value:"Date Type",class:"mb-1"}),J(o("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).date_type=l),class:"form-control"},ie,512),[[M,t(e).date_type]])]),t(e).date_type?(w(),U("div",re,[n(c,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(t(R),{modelValue:t(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):j("",!0),ce,o("div",de,[n(c,{for:"",value:"Policy Type",class:"mb-1"}),n(t(d),{modelValue:t(e).policy_type,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).policy_type=l),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ue,[n(c,{for:"",value:"Insurer",class:"mb-1"}),n(t(d),{modelValue:t(e).insurer,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).insurer=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",pe,[n(c,{for:"",value:"Agency",class:"mb-1"}),n(t(d),{modelValue:t(e).agency,"onUpdate:modelValue":s[4]||(s[4]=l=>t(e).agency=l),options:y.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",me,[n(c,{for:"",value:"Client",class:"mb-1"}),n(t(d),{modelValue:t(e).client,"onUpdate:modelValue":s[5]||(s[5]=l=>t(e).client=l),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),_e,o("div",fe,[n(c,{for:"",value:"Department",class:"mb-1"}),n(t(d),{modelValue:t(e).department,"onUpdate:modelValue":s[6]||(s[6]=l=>t(e).department=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ve,[n(c,{for:"",value:"Group",class:"mb-1"}),n(t(d),{modelValue:t(e).group,"onUpdate:modelValue":s[7]||(s[7]=l=>t(e).group=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ge,[n(c,{for:"",value:"Class of Business",class:"mb-1"}),n(t(d),{modelValue:t(e).cob,"onUpdate:modelValue":s[8]||(s[8]=l=>t(e).cob=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),o("div",ye,[n(z,{onClick:m},{default:u(()=>[_(" Cancel ")]),_:1}),n(L,{class:G(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:u(()=>[_(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Fe as default};
