import{q as i,J as Y,v as j,A as w,c as _,a as r,w as u,F as q,o as f,f as y,b as a,j as E,y as J,u as o,h as U,n as O,g as X}from"./app-83dba450.js";import{_ as z}from"./Modal-65352d78.js";import{_ as L}from"./SecondaryButton-b0fb5507.js";import{_ as R}from"./SuccessButton-dc1688f2.js";import{_ as c}from"./InputLabel-e417c4e7.js";import{X as W}from"./vue-datepicker-90ed38b2.js";/* empty css             */import{s as d}from"./multiselect-7a3aba70.js";import{_ as G}from"./DarkButton-dfab6cb6.js";import{h as H}from"./moment-a9aaa855.js";/* empty css                                                         */const K=a("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Q={class:"p-6"},Z=a("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),ee=a("p",{class:"mt-1 text-sm text-gray-600"},[a("hr")],-1),te={class:"mt-6"},oe={class:"row g-2"},se={class:"col-md-6"},ae=a("option",{value:""},"All",-1),le=a("option",{value:"date_of_issuance"},"Issuance Date",-1),ne=a("option",{value:"policy_period_start"},"Inception Date",-1),re=a("option",{value:"policy_period_end"},"Expiry Date",-1),ie=a("option",{value:"created_at"},"Created At",-1),ce=[ae,le,ne,re,ie],de={key:0,class:"col-md-6"},ue=a("hr",{style:{"margin-top":"30px"}},null,-1),me={key:1,class:"col-md-6"},pe={class:"col-md-12"},_e={class:"col-md-12"},fe={class:"col-md-12"},ye={class:"col-md-12"},he={class:"col-md-12"},ge={class:"mt-6 flex justify-end"},Fe={__name:"Filter",props:{filters:Object,filter_route:{type:String,required:!0}},setup(k){const h=k,m=i(!1),$=i(!1);Y().props.slug;const g=i([]),F=()=>{axios.get("/axios/fetch/policy-types").then(({data:l})=>{g.value=l.policy_types})},v=i([]),A=()=>{axios.get("/axios/fetch/clients/v2").then(({data:l})=>{v.value=l.clients})},b=i([]),I=()=>{axios.get("/axios/fetch/agencies").then(({data:l})=>{b.value=l.agencies})},x=i([]),M=()=>{axios.get("/axios/fetch/insurers").then(({data:l})=>{x.value=l.insurers})},V=i([]),N=()=>{axios.get("/axios/fetch/departments").then(({data:l})=>{V.value=l.departments})},D=i([]),B=l=>{axios.post("/axios/fetch/cobs/v2",{department_ids:l}).then(({data:s})=>{D.value=s.cobs})};var t="";const e=j({date_type:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),P=()=>{m.value=!0,$.value=!1,F(),A(),I(),M(),N(),t=h.filters,e.date_type=t==null?void 0:t.date_type,e.from_date=t==null?void 0:t.from_date,e.to_date=t==null?void 0:t.to_date,e.policy_type=t==null?void 0:t.policy_type,e.client=t==null?void 0:t.client,e.agency=t==null?void 0:t.agency,e.insurer=t==null?void 0:t.insurer,e.department=t==null?void 0:t.department,e.group=t==null?void 0:t.group,e.cob=t==null?void 0:t.cob},T=()=>{var l={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};const s=new URLSearchParams(l).toString();var n;n=`${route("endorsement.index")}?${s}`,e.post(n,{preserveScroll:!0,onSuccess:S=>{p(),localStorage.setItem("filters",JSON.stringify(l))},onError:S=>{console.log(S)},onFinish:()=>{}})},p=()=>{m.value=!1,e.reset()},C=l=>H(l).format("YYYY-MM-DD");return w(()=>e.department,l=>{l&&l.length>0&&B(e.department)}),w(()=>e.date_value,l=>{e.date_value!=null?(e.from_date=C(e.date_value[0]),e.to_date=C(e.date_value[1])):(e.from_date="",e.to_date="")}),(l,s)=>(f(),_(q,null,[r(G,{onClick:P,type:"button",class:"mx-1"},{default:u(()=>[K,y(" Filters ")]),_:1}),r(z,{show:m.value,onClose:p},{default:u(()=>[a("form",{onSubmit:s[8]||(s[8]=X(n=>T(),["prevent"]))},[a("div",Q,[Z,ee,a("div",te,[a("div",oe,[a("div",se,[r(c,{for:"",value:"Date Type",class:"mb-1"}),E(a("select",{"onUpdate:modelValue":s[0]||(s[0]=n=>o(e).date_type=n),class:"form-control"},ce,512),[[J,o(e).date_type]])]),o(e).date_type?(f(),_("div",de,[r(c,{for:"",value:o(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(o(W),{modelValue:o(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=n=>o(e).date_value=n),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):U("",!0),ue,h.filter_route=="policies"?(f(),_("div",me,[r(c,{for:"",value:"Policy Type",class:"mb-1"}),r(o(d),{modelValue:o(e).policy_type,"onUpdate:modelValue":s[2]||(s[2]=n=>o(e).policy_type=n),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])):U("",!0),a("div",pe,[r(c,{for:"",value:"Insurer",class:"mb-1"}),r(o(d),{modelValue:o(e).insurer,"onUpdate:modelValue":s[3]||(s[3]=n=>o(e).insurer=n),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",_e,[r(c,{for:"",value:"Agency",class:"mb-1"}),r(o(d),{modelValue:o(e).agency,"onUpdate:modelValue":s[4]||(s[4]=n=>o(e).agency=n),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",fe,[r(c,{for:"",value:"Client",class:"mb-1"}),r(o(d),{modelValue:o(e).client,"onUpdate:modelValue":s[5]||(s[5]=n=>o(e).client=n),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",ye,[r(c,{for:"",value:"Department",class:"mb-1"}),r(o(d),{modelValue:o(e).department,"onUpdate:modelValue":s[6]||(s[6]=n=>o(e).department=n),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),a("div",he,[r(c,{for:"",value:"Class of Business",class:"mb-1"}),r(o(d),{modelValue:o(e).cob,"onUpdate:modelValue":s[7]||(s[7]=n=>o(e).cob=n),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),a("div",ge,[r(L,{onClick:p},{default:u(()=>[y(" Cancel ")]),_:1}),r(R,{class:O(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:u(()=>[y(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Fe as default};
