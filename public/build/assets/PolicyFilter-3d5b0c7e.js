import{q as c,J as j,v as q,A as k,c as d,a as r,w as f,F as S,o as p,f as g,b as l,j as J,y as O,u as o,h as _,n as X,g as z}from"./app-422076eb.js";import{_ as L}from"./Modal-fa2bc94f.js";import{_ as R}from"./SecondaryButton-1d28a799.js";import{_ as W}from"./SuccessButton-a51421bd.js";import{_ as u}from"./InputLabel-ffc99a37.js";import{X as G}from"./vue-datepicker-60cf2205.js";/* empty css             */import{s as m}from"./multiselect-65d1703d.js";import{_ as H}from"./DarkButton-2ddef522.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q=l("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Z={class:"p-6"},ee=l("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),te=l("p",{class:"mt-1 text-sm text-gray-600"},[l("hr")],-1),oe={class:"mt-6"},se={class:"row g-2"},ae={class:"col-md-6"},le=l("option",{value:""},"All",-1),ne=l("option",{value:"date_of_issuance"},"Issuance Date",-1),re=l("option",{value:"policy_period_start"},"Inception Date",-1),ie=l("option",{value:"policy_period_end"},"Expiry Date",-1),ce=l("option",{value:"created_at"},"Created At",-1),ue={key:1,value:"policy_period_end"},de={key:2,value:"date_of_issuance"},pe={key:0,class:"col-md-6"},me=l("hr",{style:{"margin-top":"30px"}},null,-1),_e={key:1,class:"col-md-6"},fe={class:"col-md-12"},ye={class:"col-md-12"},he={class:"col-md-12"},ge={class:"col-md-12"},ve={class:"col-md-12"},be={class:"mt-6 flex justify-end"},Ae={__name:"PolicyFilter",props:{filters:Object,filter_route:{type:String,required:!0}},setup(U){const i=U,y=c(!1),F=c(!1),I=j().props.slug,v=c([]),A=()=>{axios.get("/axios/fetch/policy-types").then(({data:n})=>{v.value=n.policy_types})},b=c([]),M=()=>{axios.get("/axios/fetch/clients/v2").then(({data:n})=>{b.value=n.clients})},x=c([]),N=()=>{axios.get("/axios/fetch/agencies").then(({data:n})=>{x.value=n.agencies})},V=c([]),P=()=>{axios.get("/axios/fetch/insurers").then(({data:n})=>{V.value=n.insurers})},D=c([]),B=()=>{axios.get("/axios/fetch/departments").then(({data:n})=>{D.value=n.departments})},w=c([]),E=n=>{axios.post("/axios/fetch/cobs/v2",{department_ids:n}).then(({data:s})=>{w.value=s.cobs})};var t="";const e=q({date_type:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),T=()=>{y.value=!0,F.value=!1,A(),M(),N(),P(),B(),t=i.filters,e.date_type=t==null?void 0:t.date_type,e.from_date=t==null?void 0:t.from_date,e.to_date=t==null?void 0:t.to_date,e.policy_type=t==null?void 0:t.policy_type,e.client=t==null?void 0:t.client,e.agency=t==null?void 0:t.agency,e.insurer=t==null?void 0:t.insurer,e.department=t==null?void 0:t.department,e.group=t==null?void 0:t.group,e.cob=t==null?void 0:t.cob},Y=()=>{var n={date_type:e.date_type,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};console.log(i.filter_route);const s=new URLSearchParams(n).toString();var a;i.filter_route==="report"&&(a=`${route("report.index",I)}?${s}`),(i.filter_route==="policy"||i.filter_route==="policies"||i.filter_route==="renewals")&&(a=`${route("policy.index")}?${s}`),i.filter_route==="endorsement"&&(a=`${route("endorsement.index")}?${s}`),e.post(a,{preserveScroll:!0,onSuccess:$=>{h(),localStorage.setItem("filters",JSON.stringify(n))},onError:$=>{console.log($)},onFinish:()=>{}})},h=()=>{y.value=!1,e.reset()},C=n=>K(n).format("YYYY-MM-DD");return k(()=>e.department,n=>{n&&n.length>0&&E(e.department)}),k(()=>e.date_value,n=>{e.date_value!=null?(e.from_date=C(e.date_value[0]),e.to_date=C(e.date_value[1])):(e.from_date="",e.to_date="")}),(n,s)=>(p(),d(S,null,[r(H,{onClick:T,type:"button",class:"mx-1"},{default:f(()=>[Q,g(" Filters ")]),_:1}),r(L,{show:y.value,onClose:h},{default:f(()=>[l("form",{onSubmit:s[8]||(s[8]=z(a=>Y(),["prevent"]))},[l("div",Z,[ee,te,l("div",oe,[l("div",se,[l("div",ae,[r(u,{for:"",value:"Date Type",class:"mb-1"}),J(l("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).date_type=a),class:"form-control"},[i.filter_route=="policies"||i.filter_route=="endorsement"?(p(),d(S,{key:0},[le,ne,re,ie,ce],64)):_("",!0),i.filter_route=="renewals"?(p(),d("option",ue,"Expiry Date")):_("",!0),i.filter_route=="report"?(p(),d("option",de,"Date of Issuance")):_("",!0)],512),[[O,o(e).date_type]])]),o(e).date_type?(p(),d("div",pe,[r(u,{for:"",value:o(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(o(G),{modelValue:o(e).date_value,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).date_value=a),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):_("",!0),me,i.filter_route=="policies"?(p(),d("div",_e,[r(u,{for:"",value:"Policy Type",class:"mb-1"}),r(o(m),{modelValue:o(e).policy_type,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).policy_type=a),options:v.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])):_("",!0),l("div",fe,[r(u,{for:"",value:"Insurer",class:"mb-1"}),r(o(m),{modelValue:o(e).insurer,"onUpdate:modelValue":s[3]||(s[3]=a=>o(e).insurer=a),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),l("div",ye,[r(u,{for:"",value:"Agency",class:"mb-1"}),r(o(m),{modelValue:o(e).agency,"onUpdate:modelValue":s[4]||(s[4]=a=>o(e).agency=a),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),l("div",he,[r(u,{for:"",value:"Client",class:"mb-1"}),r(o(m),{modelValue:o(e).client,"onUpdate:modelValue":s[5]||(s[5]=a=>o(e).client=a),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),l("div",ge,[r(u,{for:"",value:"Department",class:"mb-1"}),r(o(m),{modelValue:o(e).department,"onUpdate:modelValue":s[6]||(s[6]=a=>o(e).department=a),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),l("div",ve,[r(u,{for:"",value:"Class of Business",class:"mb-1"}),r(o(m),{modelValue:o(e).cob,"onUpdate:modelValue":s[7]||(s[7]=a=>o(e).cob=a),options:w.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),l("div",be,[r(R,{onClick:h},{default:f(()=>[g(" Cancel ")]),_:1}),r(W,{class:X(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:f(()=>[g(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ae as default};
