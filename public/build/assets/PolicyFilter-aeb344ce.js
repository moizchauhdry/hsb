import{q as c,J as q,v as J,A as k,c as u,a as r,w as f,F as $,o as p,f as g,b as s,j,y as O,u as t,h as _,n as X,g as z}from"./app-3047f46b.js";import{_ as L,a as R}from"./SecondaryButton-2cf13337.js";import{_ as W}from"./SuccessButton-be41b618.js";import{_ as d}from"./InputLabel-434f8fdd.js";import{X as G}from"./vue-datepicker-e75f3332.js";/* empty css             */import{s as m}from"./multiselect-01fdce09.js";import{_ as H}from"./DarkButton-e37a67a6.js";import{h as K}from"./moment-a9aaa855.js";/* empty css                                                         */const Q=s("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),Z={class:"p-6"},ee=s("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1),te=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1),oe={class:"mt-6"},se={class:"row g-2"},ae={class:"col-md-6"},le=s("option",{value:""},"All",-1),re=s("option",{value:"date_of_issuance"},"Issuance Date",-1),ne=s("option",{value:"policy_period_start"},"Inception Date",-1),ie=s("option",{value:"policy_period_end"},"Expiry Date",-1),ce=s("option",{value:"created_at"},"Created At",-1),de={key:1,value:"policy_period_end"},ue={key:2,value:"date_of_issuance"},pe={key:0,class:"col-md-6"},me=s("hr",{style:{"margin-top":"30px"}},null,-1),_e={key:1,class:"col-md-6"},fe={class:"col-md-12"},ve={class:"col-md-12"},ye={class:"col-md-12"},ge={class:"col-md-12"},he={class:"col-md-12"},be={class:"mt-6 flex justify-end"},Ie={__name:"PolicyFilter",props:{filter_route:{type:String,required:!0}},setup(U){const i=U,v=c(!1),F=c(!1),I=q().props.slug,h=c([]),N=()=>{axios.get("/axios/fetch/policy-types").then(({data:a})=>{h.value=a.policy_types})},b=c([]),A=()=>{axios.get("/axios/fetch/clients/v2").then(({data:a})=>{b.value=a.clients})},x=c([]),M=()=>{axios.get("/axios/fetch/agencies").then(({data:a})=>{x.value=a.agencies})},V=c([]),P=()=>{axios.get("/axios/fetch/insurers").then(({data:a})=>{V.value=a.insurers})},D=c([]),B=()=>{axios.get("/axios/fetch/departments").then(({data:a})=>{D.value=a.departments})},S=c([]),E=a=>{axios.post("/axios/fetch/cobs/v2",{department_ids:a}).then(({data:o})=>{S.value=o.cobs})};var n="";const e=J({date_type:"",date_value:"",from_date:"",to_date:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),T=()=>{v.value=!0,F.value=!1,N(),A(),M(),P(),B(),n=localStorage.getItem("filters"),n&&(n=JSON.parse(n),e.date_type=n.date_type,e.date_value=n.date_value,e.from_date=n.from_date,e.to_date=n.to_date,e.policy_type=n.policy_type,e.client=n.client,e.agency=n.agency,e.insurer=n.insurer,e.cob=n.cob,e.department=n.department,e.group=n.group)},Y=()=>{var a={date_type:e.date_type,date_value:e.date_value,from_date:e.from_date,to_date:e.to_date,policy_type:e.policy_type,client:e.client,agency:e.agency,insurer:e.insurer,cob:e.cob,department:e.department,group:e.group};console.log(i.filter_route);const o=new URLSearchParams(a).toString();var l;i.filter_route==="report"&&(l=`${route("report.index",I)}?${o}`),(i.filter_route==="policy"||i.filter_route==="policies"||i.filter_route==="renewals"||i.filter_route==="endorsement")&&(l=`${route("policy.index")}?${o}`),e.post(l,{preserveScroll:!0,onSuccess:C=>{y(),localStorage.setItem("filters",JSON.stringify(a))},onError:C=>{console.log(C)},onFinish:()=>{}})},y=()=>{v.value=!1,e.reset()},w=a=>K(a).format("YYYY-MM-DD");return k(()=>e.department,a=>{a&&a.length>0&&E(e.department)}),k(()=>e.date_value,a=>{e.date_value!=null?(e.from_date=w(e.date_value[0]),e.to_date=w(e.date_value[1])):(e.from_date="",e.to_date="")}),(a,o)=>(p(),u($,null,[r(H,{onClick:T,type:"button",class:"mx-1"},{default:f(()=>[Q,g(" Filters ")]),_:1}),r(L,{show:v.value,onClose:y},{default:f(()=>[s("form",{onSubmit:o[8]||(o[8]=z(l=>Y(),["prevent"]))},[s("div",Z,[ee,te,s("div",oe,[s("div",se,[s("div",ae,[r(d,{for:"",value:"Date Type",class:"mb-1"}),j(s("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).date_type=l),class:"form-control"},[i.filter_route=="policies"||i.filter_route=="endorsement"?(p(),u($,{key:0},[le,re,ne,ie,ce],64)):_("",!0),i.filter_route=="renewals"?(p(),u("option",de,"Expiry Date")):_("",!0),i.filter_route=="report"?(p(),u("option",ue,"Date of Issuance")):_("",!0)],512),[[O,t(e).date_type]])]),t(e).date_type?(p(),u("div",pe,[r(d,{for:"",value:t(e).date_type,class:"mb-1 uppercase"},null,8,["value"]),r(t(G),{modelValue:t(e).date_value,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).date_value=l),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):_("",!0),me,i.filter_route=="policies"?(p(),u("div",_e,[r(d,{for:"",value:"Policy Type",class:"mb-1"}),r(t(m),{modelValue:t(e).policy_type,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).policy_type=l),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])):_("",!0),s("div",fe,[r(d,{for:"",value:"Insurer",class:"mb-1"}),r(t(m),{modelValue:t(e).insurer,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).insurer=l),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ve,[r(d,{for:"",value:"Agency",class:"mb-1"}),r(t(m),{modelValue:t(e).agency,"onUpdate:modelValue":o[4]||(o[4]=l=>t(e).agency=l),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ye,[r(d,{for:"",value:"Client",class:"mb-1"}),r(t(m),{modelValue:t(e).client,"onUpdate:modelValue":o[5]||(o[5]=l=>t(e).client=l),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",ge,[r(d,{for:"",value:"Department",class:"mb-1"}),r(t(m),{modelValue:t(e).department,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).department=l),options:D.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),s("div",he,[r(d,{for:"",value:"Class of Business",class:"mb-1"}),r(t(m),{modelValue:t(e).cob,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).cob=l),options:S.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),s("div",be,[r(R,{onClick:y},{default:f(()=>[g(" Cancel ")]),_:1}),r(W,{class:X(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:f(()=>[g(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{Ie as default};
