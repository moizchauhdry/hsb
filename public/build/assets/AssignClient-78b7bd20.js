import{e as n,v as A,o as v,i as B,w as b,x as C,b as s,u as m,c as h,t as p,g as D,l as F,z,h as _,d as O,F as P,a as k,n as T}from"./app-0973401a.js";import{_ as K}from"./Modal-293a94c6.js";import{_ as L}from"./SuccessButton-8db24ace.js";import{_ as M}from"./SecondaryButton-b3527834.js";const Q={class:"p-6"},U={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},q={class:"text-sm text-gray-500"},G={key:0,class:"mr-2"},H={class:"mt-6"},J={class:"card"},R={class:"card-header"},W={class:"row"},X={class:"col-md-6"},Y={class:"card-body"},Z={class:"table-responsive"},ee={class:"table table-bordered table-sm table-hover"},se={class:"text-uppercase"},te=["checked"],le=["value","checked","onChange"],ae={class:"card-footer"},oe={class:""},ne=["disabled"],re=["disabled"],de={class:"mt-6 flex justify-end"},pe={__name:"AssignClient",props:{roles:Object,slug:Object},setup(ie,{expose:w}){const i=n(!1),S=n(!1),c=n([]),a=n(new Set),r=n(1),g=n(1),d=n({}),f=n(""),o=A({user_id:"",client_id:[]}),I=()=>{o.client_id=Array.from(a.value),o.post(route("user.assign-client"),{preserveScroll:!0,onSuccess:()=>{i.value=!1},onError:()=>{},onFinish:()=>{}})},$=t=>{i.value=!0,S.value=!0,o.user_id=t,o.client_id=[],a.value=new Set,E(t)},E=async t=>{try{const l=(await C.get(`/users/selected-client/${t}`)).data.items;console.log(l,"saved"),l.forEach(y=>a.value.add(parseInt(y))),u()}catch(e){console.error("Error fetching saved items:",e)}},x=()=>{i.value=!1,o.reset()},u=async(t=1)=>{try{const e=await C.get("/axios/fetch/clients",{params:{page:t,search:f.value}});c.value=e.data.data,r.value=e.data.current_page,g.value=e.data.last_page,d.value[t]=d.value[t]||!1}catch(e){console.error("Error fetching items:",e)}},N=()=>{const t=r.value,e=!d.value[t];d.value[t]=e,e?c.value.forEach(l=>a.value.add(l.id)):c.value.forEach(l=>a.value.delete(l.id))},V=t=>a.value.has(t),j=t=>{a.value.has(t)?a.value.delete(t):a.value.add(t)};return w({assignClient:t=>$(t)}),(t,e)=>(v(),B(K,{show:i.value,onClose:x},{default:b(()=>[s("div",Q,[s("h2",U,[e[5]||(e[5]=s("span",null,"Assign Client",-1)),s("span",q,[m(o).user_id?(v(),h("span",G,"ID #"+p(m(o).user_id),1)):D("",!0)])]),e[13]||(e[13]=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1)),s("div",H,[s("div",J,[s("div",R,[s("div",W,[s("div",X,[F(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),class:"form-control mr-2 mb-2",placeholder:"Search",style:{width:"100%"},onKeyup:e[1]||(e[1]=l=>u())},null,544),[[z,f.value]])])])]),s("div",Y,[s("div",Z,[s("table",ee,[s("thead",se,[s("tr",null,[s("th",null,[s("input",{type:"checkbox",checked:d.value[r.value],onChange:N},null,40,te),e[6]||(e[6]=_(" ID "))]),e[7]||(e[7]=s("th",null,"Name",-1)),e[8]||(e[8]=s("th",null,"Code",-1))])]),s("tbody",null,[(v(!0),h(P,null,O(c.value,l=>(v(),h("tr",{key:l.id},[s("td",null,[s("input",{type:"checkbox",value:l.id,checked:V(l.id),onChange:y=>j(l.id)},null,40,le),_(" "+p(l.id),1)]),s("td",null,p(l.name),1),s("td",null,p(l.code),1)]))),128))])])])]),s("div",ae,[s("div",oe,[s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===1,onClick:e[2]||(e[2]=l=>u(r.value-1))},e[9]||(e[9]=[s("i",{class:"bx bx-arrow-to-left"},null,-1)]),8,ne),s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===g.value,onClick:e[3]||(e[3]=l=>u(r.value+1))},e[10]||(e[10]=[s("i",{class:"bx bx-arrow-to-right"},null,-1)]),8,re)])])])]),s("div",de,[k(M,{onClick:x},{default:b(()=>e[11]||(e[11]=[_(" Cancel ")])),_:1}),k(L,{class:T(["ml-3",{"opacity-25":m(o).processing}]),disabled:m(o).processing,onClick:e[4]||(e[4]=l=>I())},{default:b(()=>e[12]||(e[12]=[_(" Save ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"]))}};export{pe as default};
