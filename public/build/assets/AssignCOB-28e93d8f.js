import{m as n,T as V,o as v,e as A,w as f,q as C,b as s,u as m,c as h,t as p,h as D,j as F,x as O,f as b,d as T,F as P,a as k,n as q}from"./app-af507bfe.js";import{_ as z,a as K}from"./SecondaryButton-13ebe2c5.js";import{_ as L}from"./SuccessButton-ba3e303f.js";/* empty css                                                         */const M={class:"p-6"},Q={class:"text-lg font-medium text-gray-900 flex justify-between items-center"},U={class:"text-sm text-gray-500"},G={key:0,class:"mr-2"},H={class:"mt-6"},J={class:"card"},R={class:"card-header"},W={class:"row"},X={class:"col-md-6"},Y={class:"card-body"},Z={class:"table-responsive"},ee={class:"table table-bordered table-sm table-hover"},se={class:"text-uppercase"},te=["checked"],ae=["value","checked","onChange"],oe={class:"card-footer"},le={class:""},ne=["disabled"],re=["disabled"],de={class:"mt-6 flex justify-end"},pe={__name:"AssignCOB",props:{roles:Object,slug:Object},setup(ie,{expose:w}){const i=n(!1),S=n(!1),c=n([]),o=n(new Set),r=n(1),g=n(1),d=n({}),_=n(""),l=V({user_id:"",cob_id:[]}),I=()=>{l.cob_id=Array.from(o.value),l.post(route("user.assign-cob"),{preserveScroll:!0,onSuccess:()=>{i.value=!1},onError:()=>{},onFinish:()=>{}})},$=t=>{i.value=!0,S.value=!0,l.user_id=t,l.cob_id=[],o.value=new Set,E(t)},E=async t=>{try{(await C.get(`/users/selected-cob/${t}`)).data.items.forEach(y=>o.value.add(parseInt(y))),u()}catch(e){console.error("Error fetching saved items:",e)}},x=()=>{i.value=!1,l.reset()},u=async(t=1)=>{try{const e=await C.get("/axios/fetch/cobs",{params:{page:t,search:_.value}});c.value=e.data.data,r.value=e.data.current_page,g.value=e.data.last_page,d.value[t]=d.value[t]||!1}catch(e){console.error("Error fetching items:",e)}},B=()=>{const t=r.value,e=!d.value[t];d.value[t]=e,e?c.value.forEach(a=>o.value.add(a.id)):c.value.forEach(a=>o.value.delete(a.id))},j=t=>o.value.has(t),N=t=>{o.value.has(t)?o.value.delete(t):o.value.add(t)};return w({assignCob:t=>$(t)}),(t,e)=>(v(),A(z,{show:i.value,onClose:x},{default:f(()=>[s("div",M,[s("h2",Q,[e[5]||(e[5]=s("span",null,"Assign Class of Business",-1)),s("span",U,[m(l).user_id?(v(),h("span",G,"ID #"+p(m(l).user_id),1)):D("",!0)])]),e[13]||(e[13]=s("p",{class:"mt-1 text-sm text-gray-600"},[s("hr")],-1)),s("div",H,[s("div",J,[s("div",R,[s("div",W,[s("div",X,[F(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),class:"form-control mr-2 mb-2",placeholder:"Search",style:{width:"100%"},onKeyup:e[1]||(e[1]=a=>u())},null,544),[[O,_.value]])])])]),s("div",Y,[s("div",Z,[s("table",ee,[s("thead",se,[s("tr",null,[s("th",null,[s("input",{type:"checkbox",checked:d.value[r.value],onChange:B},null,40,te),e[6]||(e[6]=b(" ID "))]),e[7]||(e[7]=s("th",null,"Name",-1)),e[8]||(e[8]=s("th",null,"Code",-1))])]),s("tbody",null,[(v(!0),h(P,null,T(c.value,a=>(v(),h("tr",{key:a.id},[s("td",null,[s("input",{type:"checkbox",value:a.id,checked:j(a.id),onChange:y=>N(a.id)},null,40,ae),b(" "+p(a.id),1)]),s("td",null,p(a.class_name),1),s("td",null,p(a.code),1)]))),128))])])])]),s("div",oe,[s("div",le,[s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===1,onClick:e[2]||(e[2]=a=>u(r.value-1))},e[9]||(e[9]=[s("i",{class:"bx bx-arrow-to-left"},null,-1)]),8,ne),s("button",{class:"btn btn-primary btn-sm mr-1 pb-2",disabled:r.value===g.value,onClick:e[3]||(e[3]=a=>u(r.value+1))},e[10]||(e[10]=[s("i",{class:"bx bx-arrow-to-right"},null,-1)]),8,re)])])])]),s("div",de,[k(K,{onClick:x},{default:f(()=>e[11]||(e[11]=[b(" Cancel ")])),_:1}),k(L,{class:q(["ml-3",{"opacity-25":m(l).processing}]),disabled:m(l).processing,onClick:e[4]||(e[4]=a=>I())},{default:f(()=>e[12]||(e[12]=[b(" Save ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"]))}};export{pe as default};
