import{m as i,Q as j,T as q,C as U,o as $,c as w,a as n,w as p,F as G,b as o,f,j as J,s as O,u as s,h as R,n as X,g as z}from"./app-1f90dc38.js";import{_ as L,a as Q}from"./SecondaryButton-71e979f9.js";import{_ as W}from"./SuccessButton-df77c511.js";import{_ as u}from"./InputLabel-c81240e3.js";import{X as H}from"./vue-datepicker-985c485d.js";/* empty css             */import{s as d}from"./multiselect-915d3f75.js";import{_ as K}from"./DarkButton-2f46265b.js";/* empty css                                                         */const Y={class:"p-6"},Z={class:"mt-6"},ee={class:"row g-2"},te={class:"col-md-6"},se={key:0,class:"col-md-6"},oe={class:"col-md-6"},le={class:"col-md-6"},ae={class:"col-md-12"},ne={class:"col-md-12"},re={class:"col-md-12"},ie={class:"col-md-12"},ue={class:"col-md-12"},de={class:"mt-6 flex justify-end"},xe={__name:"ReportFilter",props:{data:Array,filter_route:{type:String,required:!0}},setup(D){const v=D,c=i(!1),y=i(!1),F=j().props.slug,g=i([]),k=()=>{axios.get("/axios/fetch/policy-types").then(({data:l})=>{g.value=l.policy_types})},_=i([]),I=()=>{axios.get("/axios/fetch/clients/v2").then(({data:l})=>{_.value=l.clients})},b=i([]),N=()=>{axios.get("/axios/fetch/agencies").then(({data:l})=>{b.value=l.agencies})},x=i([]),A=()=>{axios.get("/axios/fetch/insurers").then(({data:l})=>{x.value=l.insurers})},V=i([]),T=()=>{axios.get("/axios/fetch/departments").then(({data:l})=>{V.value=l.departments})},h=i([]),B=l=>{axios.post("/axios/fetch/groups",{department_ids:l}).then(({data:e})=>{h.value=e.groups})},C=i([]),P=l=>{axios.post("/axios/fetch/cobs/v2",{group_ids:l}).then(({data:e})=>{C.value=e.cobs})};var r="";const t=q({date_type:"",date_value:"",policy_type:[],client:[],agency:[],insurer:[],department:[],group:[],cob:[]}),E=()=>{c.value=!0,y.value=!1,k(),I(),N(),A(),T(),r=localStorage.getItem("filters"),r&&(r=JSON.parse(r),t.date_type=r.date_type,t.date_value=r.date_value,t.policy_type=r.policy_type,t.client=r.client,t.agency=r.agency,t.cob=r.cob,t.insurer=r.insurer)},M=()=>{var l={date_type:t.date_type,date_value:t.date_value,policy_type:t.policy_type,client:t.client,agency:t.agency,cob:t.cob,insurer:t.insurer};const e=new URLSearchParams(l).toString();var a;v.filter_route==="report"&&(a=`${route("report.index",F)}?${e}`),v.filter_route==="policy"&&(a=`${route("policy.index")}?${e}`),t.post(a,{preserveScroll:!0,onSuccess:S=>{m(),localStorage.setItem("filters",JSON.stringify(l))},onError:S=>{console.log(S)},onFinish:()=>{}})},m=()=>{c.value=!1,t.reset()};return U(()=>t.department,l=>{l&&l.length>0&&B(t.department)}),U(()=>t.group,l=>{l&&l.length>0&&P(t.group)}),(l,e)=>($(),w(G,null,[n(K,{onClick:E,type:"button",class:"mx-1"},{default:p(()=>e[10]||(e[10]=[o("i",{class:"bx bx-search-alt text-lg mr-1"},null,-1),f(" Filters ")])),_:1}),n(L,{show:c.value,onClose:m},{default:p(()=>[o("form",{onSubmit:e[9]||(e[9]=z(a=>y.value?l.update():M(),["prevent"]))},[o("div",Y,[e[16]||(e[16]=o("h2",{class:"text-lg font-medium text-gray-900"},"Search Filters",-1)),e[17]||(e[17]=o("p",{class:"mt-1 text-sm text-gray-600"},[o("hr")],-1)),o("div",Z,[o("div",ee,[o("div",te,[n(u,{for:"",value:"Date Type",class:"mb-1"}),J(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s(t).date_type=a),class:"form-control"},e[11]||(e[11]=[o("option",{value:""},"All",-1),o("option",{value:"date_of_issuance"},"Issuance Date",-1),o("option",{value:"policy_period_start"},"Inception Date",-1),o("option",{value:"policy_period_end"},"Expiry Date",-1),o("option",{value:"created_at"},"Created At",-1)]),512),[[O,s(t).date_type]])]),s(t).date_type?($(),w("div",se,[n(u,{for:"",value:s(t).date_type,class:"mb-1 uppercase"},null,8,["value"]),n(s(H),{modelValue:s(t).date_value,"onUpdate:modelValue":e[1]||(e[1]=a=>s(t).date_value=a),range:"","enable-time-picker":!1,"show-time":!1},null,8,["modelValue"])])):R("",!0),e[12]||(e[12]=o("hr",{style:{"margin-top":"30px"}},null,-1)),o("div",oe,[n(u,{for:"",value:"Policy Type",class:"mb-1"}),n(s(d),{modelValue:s(t).policy_type,"onUpdate:modelValue":e[2]||(e[2]=a=>s(t).policy_type=a),options:g.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",le,[n(u,{for:"",value:"Insurer",class:"mb-1"}),n(s(d),{modelValue:s(t).insurer,"onUpdate:modelValue":e[3]||(e[3]=a=>s(t).insurer=a),options:x.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ae,[n(u,{for:"",value:"Agency",class:"mb-1"}),n(s(d),{modelValue:s(t).agency,"onUpdate:modelValue":e[4]||(e[4]=a=>s(t).agency=a),options:b.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ne,[n(u,{for:"",value:"Client",class:"mb-1"}),n(s(d),{modelValue:s(t).client,"onUpdate:modelValue":e[5]||(e[5]=a=>s(t).client=a),options:_.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),e[13]||(e[13]=o("hr",{style:{"margin-top":"30px"}},null,-1)),o("div",re,[n(u,{for:"",value:"Department",class:"mb-1"}),n(s(d),{modelValue:s(t).department,"onUpdate:modelValue":e[6]||(e[6]=a=>s(t).department=a),options:V.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ie,[n(u,{for:"",value:"Group",class:"mb-1"}),n(s(d),{modelValue:s(t).group,"onUpdate:modelValue":e[7]||(e[7]=a=>s(t).group=a),options:h.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])]),o("div",ue,[n(u,{for:"",value:"Class of Business",class:"mb-1"}),n(s(d),{modelValue:s(t).cob,"onUpdate:modelValue":e[8]||(e[8]=a=>s(t).cob=a),options:C.value,searchable:!0,mode:"tags"},null,8,["modelValue","options"])])])]),o("div",de,[n(Q,{onClick:m},{default:p(()=>e[14]||(e[14]=[f(" Cancel ")])),_:1}),n(W,{class:X(["ml-3",{"opacity-25":s(t).processing}]),disabled:s(t).processing},{default:p(()=>e[15]||(e[15]=[f(" Search ")])),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{xe as default};
